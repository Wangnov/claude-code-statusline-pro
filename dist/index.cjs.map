{"version":3,"sources":["../src/config/schema.ts","../src/config/loader.ts","../src/components/base.ts","../src/components/branch.ts","../src/components/model.ts","../src/components/project.ts","../src/components/status.ts","../src/components/tokens.ts","../src/terminal/colors.ts","../src/terminal/detector.ts","../src/core/generator.ts","../src/index.ts","../src/cli/config-editor.ts","../src/cli/mock-data.ts","../src/cli/preview-engine.ts","../src/cli/message-icons.ts","../src/core/parser.ts","../src/utils/index.ts"],"sourcesContent":["import { z } from 'zod';\n\n// ==================== Transcript ç›¸å…³ç±»å‹ ====================\n\n/**\n * Tokenä½¿ç”¨ä¿¡æ¯æ¨¡å¼ | Token usage info schema\n */\nexport const UsageInfoSchema = z.object({\n  input_tokens: z.number(),\n  cache_creation_input_tokens: z.number(),\n  cache_read_input_tokens: z.number(),\n  output_tokens: z.number(),\n});\n\nexport type UsageInfo = z.infer<typeof UsageInfoSchema>;\n\n/**\n * Transcriptæ¡ç›®æ¨¡å¼ | Transcript entry schema\n */\nexport const TranscriptEntrySchema = z\n  .object({\n    type: z.string(),\n    message: z\n      .object({\n        usage: UsageInfoSchema.optional(),\n        stop_reason: z.string().optional(),\n        content: z.array(z.unknown()).optional(),\n      })\n      .optional(),\n  })\n  .passthrough();\n\nexport type TranscriptEntry = z.infer<typeof TranscriptEntrySchema>;\n\n// ==================== åŸºç¡€é…ç½®ç±»å‹ ====================\n\n// é¢œè‰²æšä¸¾\nconst ColorSchema = z.enum([\n  'black',\n  'red',\n  'green',\n  'yellow',\n  'blue',\n  'magenta',\n  'cyan',\n  'white',\n  'gray',\n  'bright_red',\n  'bright_green',\n  'bright_yellow',\n  'bright_blue',\n  'bright_magenta',\n  'bright_cyan',\n  'bright_white',\n]);\n\n// è‡ªåŠ¨æ£€æµ‹é€‰é¡¹\nconst AutoDetectSchema = z.union([z.boolean(), z.literal('auto')]);\n\n// åŸºç¡€ç»„ä»¶é…ç½®\nconst BaseComponentSchema = z.object({\n  enabled: z.boolean().default(true),\n  icon: z.string(),\n  nerd_icon: z.string().optional(),\n  text_icon: z.string().optional(),\n  color: ColorSchema,\n});\n\n// é¡¹ç›®ç»„ä»¶é…ç½® | Project component config\nexport const ProjectComponentSchema = BaseComponentSchema.extend({\n  show_when_empty: z.boolean().default(false),\n});\n\n// æ¨¡å‹ç»„ä»¶é…ç½® | Model component config\nexport const ModelComponentSchema = BaseComponentSchema.extend({\n  show_full_name: z.boolean().default(false),\n  custom_names: z.record(z.string(), z.string()).default({}),\n});\n\n// åˆ†æ”¯ç»„ä»¶é…ç½® | Branch component config\nexport const BranchComponentSchema = BaseComponentSchema.extend({\n  show_when_no_git: z.boolean().default(false),\n  max_length: z.number().min(1).default(20),\n});\n\n// Token é˜ˆå€¼é…ç½® | Token threshold config\nconst TokenThresholdsSchema = z.object({\n  warning: z.number().min(0).max(100).default(60),\n  danger: z.number().min(0).max(100).default(85),\n  backup: z.number().min(0).max(100).default(85),\n  critical: z.number().min(0).max(100).default(95),\n});\n\n// Token é¢œè‰²é…ç½® | Token color config\nconst TokenColorsSchema = z.object({\n  safe: ColorSchema.default('green'),\n  warning: ColorSchema.default('yellow'),\n  danger: ColorSchema.default('red'),\n});\n\n// Token çŠ¶æ€å›¾æ ‡é…ç½® | Token status icon config\nconst TokenStatusIconsSchema = z.object({\n  backup: z.string().default('âš¡'),\n  critical: z.string().default('ğŸ”¥'),\n});\n\n// Token ç»„ä»¶é…ç½® | Token component config\nexport const TokenComponentSchema = BaseComponentSchema.extend({\n  show_progress_bar: z.boolean().default(true),\n  show_percentage: z.boolean().default(true),\n  show_raw_numbers: z.boolean().default(false),\n  context_window: z.number().default(200000),\n  progress_bar_width: z.number().default(10),\n  progress_bar_chars: z\n    .object({\n      filled: z.string().default('â–ˆ'),\n      empty: z.string().default('â–‘'),\n      backup: z.string().default('â–“'),\n    })\n    .optional(),\n  colors: TokenColorsSchema.optional(),\n  thresholds: TokenThresholdsSchema.optional(),\n  status_icons: TokenStatusIconsSchema.optional(),\n  status_nerd_icons: TokenStatusIconsSchema.optional(),\n  status_text_icons: TokenStatusIconsSchema.optional(),\n});\n\n// çŠ¶æ€å›¾æ ‡é…ç½® | Status icon config\nconst StatusIconsSchema = z.object({\n  ready: z.string().default('âœ…'),\n  thinking: z.string().default('ğŸ’­'),\n  tool: z.string().default('ğŸ”§'),\n  error: z.string().default('âŒ'),\n  warning: z.string().default('âš ï¸'),\n});\n\n// çŠ¶æ€é¢œè‰²é…ç½® | Status color config\nconst StatusColorsSchema = z.object({\n  ready: ColorSchema.default('green'),\n  thinking: ColorSchema.default('yellow'),\n  tool: ColorSchema.default('blue'),\n  error: ColorSchema.default('red'),\n  warning: ColorSchema.default('yellow'),\n});\n\n// çŠ¶æ€ç»„ä»¶é…ç½® | Status component config\nexport const StatusComponentSchema = BaseComponentSchema.extend({\n  show_recent_errors: z.boolean().default(true),\n  icons: StatusIconsSchema.optional(),\n  nerd_icons: StatusIconsSchema.optional(),\n  text_icons: StatusIconsSchema.optional(),\n  colors: StatusColorsSchema.optional(),\n});\n\n// ç»„ä»¶é…ç½®é›†åˆ | Components config collection\nconst ComponentsSchema = z.object({\n  order: z.array(z.string()).default(['project', 'model', 'branch', 'tokens', 'status']),\n  project: ProjectComponentSchema.optional(),\n  model: ModelComponentSchema.optional(),\n  branch: BranchComponentSchema.optional(),\n  tokens: TokenComponentSchema.optional(),\n  status: StatusComponentSchema.optional(),\n});\n\n// æ ·å¼é…ç½® | Style config\nconst StyleSchema = z.object({\n  separator: z.string().default(' | '),\n  enable_colors: AutoDetectSchema.default('auto'),\n  enable_emoji: AutoDetectSchema.default('auto'),\n  enable_nerd_font: AutoDetectSchema.default('auto'),\n  compact_mode: z.boolean().default(false),\n  max_width: z.number().min(0).default(0),\n});\n\n// é«˜çº§é…ç½® | Advanced config\nconst AdvancedSchema = z.object({\n  cache_enabled: z.boolean().default(true),\n  recent_error_count: z.number().min(1).default(5),\n  git_timeout: z.number().min(100).default(1000),\n  debug_mode: z.boolean().default(false),\n  custom_color_codes: z.record(z.string(), z.string()).default({}),\n});\n\n// å®éªŒæ€§åŠŸèƒ½é…ç½® | Experimental features config\nconst ExperimentalSchema = z.object({\n  show_context_health: z.boolean().default(false),\n  adaptive_colors: z.boolean().default(false),\n  show_timestamp: z.boolean().default(false),\n  show_session_info: z.boolean().default(false),\n  force_nerd_font: z.boolean().default(false),\n});\n\n// é¢„è®¾æ˜ å°„é…ç½® | Preset mapping config\nconst PresetMappingSchema = z\n  .object({\n    P: z.literal('project'),\n    M: z.literal('model'),\n    B: z.literal('branch'),\n    T: z.literal('tokens'),\n    S: z.literal('status'),\n  })\n  .default({\n    P: 'project',\n    M: 'model',\n    B: 'branch',\n    T: 'tokens',\n    S: 'status',\n  });\n\n// æ¨¡æ¿é…ç½® | Template config\nconst TemplateConfigSchema = z\n  .object({\n    description: z.string().optional(),\n    style: StyleSchema.partial().optional(),\n    components: ComponentsSchema.partial().optional(),\n  })\n  .passthrough(); // å…è®¸é¢å¤–å­—æ®µ\n\nconst TemplatesSchema = z.record(z.string(), TemplateConfigSchema).optional();\n\n// ä¸»é…ç½® schema | Main config schema\nexport const ConfigSchema = z\n  .object({\n    preset: z.string().default('PMBTS'),\n    theme: z.string().optional(),\n    preset_mapping: PresetMappingSchema.optional(),\n    components: ComponentsSchema.optional(),\n    style: StyleSchema.optional(),\n    advanced: AdvancedSchema.optional(),\n    experimental: ExperimentalSchema.optional(),\n    templates: TemplatesSchema,\n  })\n  .passthrough(); // å…è®¸é¢å¤–å­—æ®µ\n\n// è¾“å…¥æ•°æ® schema | Input data schema\nexport const InputDataSchema = z\n  .object({\n    // æ”¯æŒä¸¤ç§å­—æ®µåæ ¼å¼\n    hook_event_name: z.string().optional(),\n    hookEventName: z.string().optional(),\n    session_id: z.string().optional(),\n    sessionId: z.string().optional(),\n    transcript_path: z.string().optional(),\n    transcriptPath: z.string().optional(),\n    cwd: z.string().optional(),\n    model: z\n      .object({\n        id: z.string().optional(),\n        display_name: z.string().optional(),\n      })\n      .optional(),\n    workspace: z\n      .object({\n        current_dir: z.string().optional(),\n        project_dir: z.string().optional(),\n      })\n      .optional(),\n    gitBranch: z.string().optional(),\n    git: z\n      .object({\n        branch: z.string().optional(),\n        status: z.string().optional(),\n        ahead: z.number().optional(),\n        behind: z.number().optional(),\n      })\n      .optional(),\n  })\n  .passthrough() // å…è®¸é¢å¤–å­—æ®µ\n  .transform((data) => ({\n    hookEventName: data.hookEventName || data.hook_event_name || 'Status',\n    sessionId: data.sessionId || data.session_id || null,\n    transcriptPath: data.transcriptPath || data.transcript_path || null,\n    cwd: data.cwd || process.cwd(),\n    model: data.model || {},\n    workspace: data.workspace || {},\n    gitBranch: data.gitBranch || data.git?.branch || null,\n  }));\n\n// æ¸²æŸ“ä¸Šä¸‹æ–‡ schema | Render context schema\nexport const RenderContextSchema = z.object({\n  inputData: InputDataSchema,\n  capabilities: z.object({\n    colors: z.boolean(),\n    emoji: z.boolean(),\n    nerdFont: z.boolean(),\n  }),\n  colors: z.record(z.string(), z.string()),\n  icons: z.record(z.string(), z.string()),\n  config: ConfigSchema,\n});\n\n// åŸºç¡€ç»„ä»¶é…ç½®ç±»å‹ | Base component config type\nexport type ComponentConfig = z.infer<typeof BaseComponentSchema>;\n\n// æ ·å¼é…ç½®ç±»å‹\nexport type StyleConfig = z.infer<typeof StyleSchema>;\n\n// ä¸»é¢˜é…ç½®ç±»å‹ (ç®€åŒ–å¤„ç†)\nexport interface ThemeConfig {\n  name: string;\n  style?: Partial<StyleConfig>;\n  components?: Partial<z.infer<typeof ComponentsSchema>>;\n}\n\n// ç»„ä»¶é€‰é¡¹å’Œå…ƒæ•°æ®ç±»å‹\nexport interface ComponentOptions {\n  id: string;\n  enabled?: boolean;\n  [key: string]: unknown;\n}\n\nexport interface ComponentMetadata {\n  name: string;\n  version: string;\n  description?: string;\n  dependencies?: string[];\n}\n\nexport interface RenderOptions {\n  forceColors?: boolean;\n  forceEmoji?: boolean;\n  forceNerdFont?: boolean;\n  maxWidth?: number;\n}\n\n// CLIç›¸å…³ç±»å‹å®šä¹‰\nexport interface LivePreviewOptions {\n  configPath?: string;\n  theme?: string;\n  refreshInterval?: number;\n  maxScenarios?: number;\n  debug?: boolean;\n  dynamicBanner?: boolean;\n}\n\nexport interface ConfigEditorOptions {\n  configPath?: string;\n  enableLivePreview?: boolean;\n  autoSave?: boolean;\n}\n\nexport interface MockScenario {\n  id: string;\n  name: string;\n  description: string;\n  inputData: InputData;\n  tokenUsage?: number;\n  expectedStatus?: 'ready' | 'thinking' | 'tool_use' | 'error' | 'complete';\n}\n\n// å¯¼å‡ºç±»å‹å®šä¹‰ | Export type definitions\nexport type Config = z.infer<typeof ConfigSchema>;\nexport type InputData = z.infer<typeof InputDataSchema>;\nexport type RenderContext = z.infer<typeof RenderContextSchema>;\nexport type ProjectComponentConfig = z.infer<typeof ProjectComponentSchema>;\nexport type ModelComponentConfig = z.infer<typeof ModelComponentSchema>;\nexport type BranchComponentConfig = z.infer<typeof BranchComponentSchema>;\nexport type TokensComponentConfig = z.infer<typeof TokenComponentSchema>;\nexport type StatusComponentConfig = z.infer<typeof StatusComponentSchema>;\n","import fs from 'node:fs';\nimport path from 'node:path';\nimport TOML from '@iarna/toml';\nimport type { ZodError } from 'zod';\nimport { type Config, ConfigSchema } from './schema.js';\n\n// è·å–å½“å‰ç›®å½•ï¼Œå…¼å®¹ ESM å’Œ CJS\nfunction getCurrentDir(): string {\n  // CJS ç¯å¢ƒ\n  try {\n    // @ts-ignore - __dirname may not exist in ESM\n    if (typeof __dirname !== 'undefined') {\n      return __dirname;\n    }\n  } catch {\n    // å¿½ç•¥é”™è¯¯\n  }\n\n  // ESM ç¯å¢ƒå›é€€ - ä½¿ç”¨åŒæ­¥æ–¹å¼\n  try {\n    if (typeof import.meta !== 'undefined' && import.meta.url) {\n      // ç›´æ¥æ„å»ºè·¯å¾„ï¼Œé¿å…å¼‚æ­¥å¯¼å…¥\n      const url = import.meta.url;\n      if (url.startsWith('file://')) {\n        return path.dirname(url.slice(7)); // ç§»é™¤ 'file://' å‰ç¼€\n      }\n    }\n  } catch {\n    // å¿½ç•¥é”™è¯¯\n  }\n\n  // æœ€ç»ˆå›é€€åˆ°å½“å‰å·¥ä½œç›®å½•\n  return process.cwd();\n}\n\nexport interface ConfigLoadOptions {\n  customPath?: string | undefined;\n  overridePreset?: string | undefined;\n}\n\nexport class ConfigLoader {\n  private cachedConfig: Config | null = null;\n  private configPath: string | null = null;\n\n  /**\n   * æŸ¥æ‰¾é…ç½®æ–‡ä»¶ | Find config file\n   */\n  private findConfigFile(): string | null {\n    const possiblePaths = [\n      // å½“å‰ç›®å½• | Current directory\n      path.join(process.cwd(), 'statusline.config.toml'),\n      path.join(process.cwd(), '.statusline.toml'),\n\n      // ç”¨æˆ·ä¸»ç›®å½• | User home directory\n      path.join(\n        process.env.HOME || process.env.USERPROFILE || '',\n        '.config',\n        'claude-statusline',\n        'config.toml'\n      ),\n      path.join(process.env.HOME || process.env.USERPROFILE || '', '.statusline.toml'),\n\n      // åŒ…ç›®å½• | Package directory (fallback)\n      path.join(getCurrentDir(), '../../statusline.config.toml'),\n    ];\n\n    for (const configPath of possiblePaths) {\n      if (fs.existsSync(configPath)) {\n        return configPath;\n      }\n    }\n\n    return null;\n  }\n\n  /**\n   * æ·±åº¦åˆå¹¶å¯¹è±¡ | Deep merge objects\n   */\n  private deepMerge<T extends Record<string, unknown>>(target: T, source: Partial<T>): T {\n    const result = { ...target };\n\n    for (const key in source) {\n      const sourceValue = source[key];\n      const targetValue = result[key];\n\n      if (sourceValue && typeof sourceValue === 'object' && !Array.isArray(sourceValue)) {\n        result[key] = this.deepMerge(\n          targetValue || ({} as Record<string, unknown>),\n          sourceValue\n        ) as T[Extract<keyof T, string>];\n      } else if (sourceValue !== undefined) {\n        result[key] = sourceValue as T[Extract<keyof T, string>];\n      }\n    }\n\n    return result;\n  }\n\n  /**\n   * æ¸…ç†å¯¹è±¡ä¸­çš„ Symbol å±æ€§ | Clean Symbol properties from objects\n   * TOML è§£æå™¨ä¼šåœ¨æ•°ç»„ä¸Šæ·»åŠ  Symbol å…ƒæ•°æ®ï¼Œéœ€è¦æ¸…ç†ä»¥é¿å…åºåˆ—åŒ–é”™è¯¯\n   */\n  private cleanSymbols(obj: unknown): unknown {\n    if (obj === null || typeof obj !== 'object') {\n      return obj;\n    }\n\n    if (Array.isArray(obj)) {\n      // æ¸…ç†æ•°ç»„çš„ Symbol å±æ€§ï¼Œåˆ›å»ºæ–°çš„çº¯æ•°ç»„\n      return obj.map((item) => this.cleanSymbols(item));\n    }\n\n    // å¯¹è±¡ï¼šåªä¿ç•™å­—ç¬¦ä¸²é”®çš„å±æ€§ï¼Œå¿½ç•¥ Symbol é”®\n    const cleaned: Record<string, unknown> = {};\n    for (const [key, value] of Object.entries(obj)) {\n      cleaned[key] = this.cleanSymbols(value);\n    }\n\n    return cleaned;\n  }\n\n  /**\n   * åº”ç”¨é¢„è®¾é…ç½® | Apply preset configuration\n   */\n  private applyPreset(config: Config): Config {\n    if (!config.preset) return config;\n\n    const preset = config.preset.toUpperCase();\n    const mapping = config.preset_mapping;\n\n    // å¦‚æœæ²¡æœ‰æ˜ å°„é…ç½®ï¼Œä½¿ç”¨é»˜è®¤å€¼\n    if (!mapping) {\n      console.warn('No preset mapping found, using default');\n      return config;\n    }\n\n    // éªŒè¯é¢„è®¾å­—ç¬¦ä¸² | Validate preset string\n    for (const char of preset) {\n      if (!(char in mapping)) {\n        console.warn(`Unknown preset character: ${char}`);\n        return config;\n      }\n    }\n\n    // ç”Ÿæˆç»„ä»¶é¡ºåº | Generate component order\n    const newOrder: string[] = [];\n    for (const char of preset) {\n      const componentName = mapping[char as keyof typeof mapping];\n      if (componentName) {\n        newOrder.push(componentName);\n      }\n    }\n\n    // æ›´æ–°é…ç½® | Update config\n    const updatedConfig = { ...config };\n    if (!updatedConfig.components) {\n      updatedConfig.components = {\n        order: newOrder,\n      };\n    } else {\n      updatedConfig.components.order = newOrder;\n    }\n\n    // æ›´æ–°ç»„ä»¶å¯ç”¨çŠ¶æ€ | Update component enabled status\n    const allComponents = Object.values(mapping);\n    for (const componentName of allComponents) {\n      if (updatedConfig.components) {\n        const component =\n          updatedConfig.components[componentName as keyof typeof updatedConfig.components];\n        if (component && typeof component === 'object' && 'enabled' in component) {\n          (component as Record<string, unknown>).enabled = newOrder.includes(componentName);\n        }\n      }\n    }\n\n    return updatedConfig;\n  }\n\n  /**\n   * åº”ç”¨ä¸»é¢˜é…ç½®è¦†ç›– | Apply theme config overrides\n   */\n  private async applyThemeConfig(config: Config): Promise<Config> {\n    if (!config.theme) return config;\n\n    // é¦–å…ˆå°è¯•ä»æ¨¡æ¿ä¸­åŠ è½½ä¸»é¢˜ | First try loading theme from templates\n    const templateConfig = config.templates?.[config.theme];\n    if (templateConfig) {\n      // ä½¿ç”¨TOMLä¸­å®šä¹‰çš„æ¨¡æ¿é…ç½® | Use template config from TOML\n      return this.applyTemplateConfig(config, templateConfig);\n    }\n\n    console.warn(`Theme \"${config.theme}\" not found in templates`);\n    return config;\n  }\n\n  /**\n   * åº”ç”¨æ¨¡æ¿é…ç½® | Apply template config\n   */\n  private applyTemplateConfig(config: Config, templateConfig: any): Config {\n    const mergedConfig = { ...config };\n\n    // åº”ç”¨æ¨¡æ¿çš„æ ·å¼é…ç½® | Apply template style config\n    if (templateConfig.style) {\n      mergedConfig.style = {\n        ...mergedConfig.style,\n        ...templateConfig.style,\n      };\n    }\n\n    // åº”ç”¨æ¨¡æ¿çš„ç»„ä»¶é…ç½® | Apply template components config\n    if (templateConfig.components) {\n      if (!mergedConfig.components) {\n        mergedConfig.components = {} as any;\n      }\n\n      // å¯¹äºæ¯ä¸ªç»„ä»¶ï¼Œæ·±åº¦åˆå¹¶é…ç½® | Deep merge config for each component\n      const knownComponents = ['project', 'model', 'branch', 'tokens', 'status'] as const;\n      for (const componentName of knownComponents) {\n        const templateComponentConfig = templateConfig.components[componentName];\n        if (templateComponentConfig) {\n          if (!mergedConfig.components[componentName]) {\n            mergedConfig.components[componentName] = {} as any;\n          }\n          mergedConfig.components[componentName] = {\n            ...mergedConfig.components[componentName],\n            ...templateComponentConfig,\n          };\n        }\n      }\n\n      // åº”ç”¨ç»„ä»¶é¡ºåº | Apply component order\n      if (templateConfig.components.order) {\n        mergedConfig.components.order = templateConfig.components.order;\n      }\n    }\n\n    return mergedConfig;\n  }\n\n  /**\n   * åŠ è½½é…ç½® | Load configuration\n   */\n  async loadConfig(options: ConfigLoadOptions = {}): Promise<Config> {\n    try {\n      // ä½¿ç”¨ç¼“å­˜ | Use cache if available\n      if (this.cachedConfig && !options.customPath && !options.overridePreset) {\n        return this.cachedConfig;\n      }\n\n      // æŸ¥æ‰¾é…ç½®æ–‡ä»¶ | Find config file\n      this.configPath = options.customPath || this.findConfigFile();\n\n      let userConfig: Partial<Config> = {};\n\n      if (this.configPath && fs.existsSync(this.configPath)) {\n        try {\n          const configContent = await fs.promises.readFile(this.configPath, 'utf8');\n          const parsedToml = TOML.parse(configContent);\n          // æ·±åº¦æ¸…ç† TOML è§£æåçš„ Symbol å±æ€§\n          userConfig = this.cleanSymbols(parsedToml) as Partial<Config>;\n        } catch (error) {\n          console.warn(`Failed to parse config file ${this.configPath}:`, error);\n        }\n      }\n\n      // å‘½ä»¤è¡Œé¢„è®¾è¦†ç›– | Command line preset override\n      if (options.overridePreset) {\n        userConfig.preset = options.overridePreset;\n      }\n\n      // ä½¿ç”¨ Zod è§£æå’ŒéªŒè¯é…ç½® | Parse and validate with Zod\n      if (process.env.DEBUG) {\n        console.error(\n          'Before ConfigSchema.parse, userConfig:',\n          JSON.stringify(userConfig, null, 2)\n        );\n      }\n      const config = ConfigSchema.parse(userConfig);\n      if (process.env.DEBUG) {\n        console.error('After ConfigSchema.parse, config keys:', Object.keys(config));\n      }\n\n      // åº”ç”¨é¢„è®¾ | Apply preset\n      let finalConfig = this.applyPreset(config);\n\n      // åº”ç”¨ä¸»é¢˜é…ç½® | Apply theme config\n      if (finalConfig.theme) {\n        finalConfig = await this.applyThemeConfig(finalConfig);\n      }\n\n      // ç¼“å­˜é…ç½® | Cache config\n      this.cachedConfig = finalConfig;\n\n      return finalConfig;\n    } catch (error) {\n      if (error instanceof Error && 'issues' in error) {\n        // Zod éªŒè¯é”™è¯¯ | Zod validation error\n        const zodError = error as ZodError;\n        console.error('Configuration validation failed:');\n        for (const issue of zodError.issues) {\n          console.error(`  ${issue.path.join('.')}: ${issue.message}`);\n        }\n      } else {\n        console.error('Failed to load configuration:', error);\n      }\n\n      // è¿”å›é»˜è®¤é…ç½® | Return default config\n      console.warn('Using default configuration');\n      const defaultConfig = ConfigSchema.parse({});\n      this.cachedConfig = this.applyPreset(defaultConfig);\n      return this.cachedConfig;\n    }\n  }\n\n  /**\n   * è·å–é…ç½®è·¯å¾„ | Get config path\n   */\n  getConfigPath(): string | null {\n    return this.configPath;\n  }\n\n  /**\n   * æ¸…é™¤ç¼“å­˜ | Clear cache\n   */\n  clearCache(): void {\n    this.cachedConfig = null;\n  }\n\n  /**\n   * éªŒè¯é…ç½®æ–‡ä»¶ | Validate config file\n   */\n  async validateConfig(configPath?: string): Promise<{ valid: boolean; errors: string[] }> {\n    const errors: string[] = [];\n\n    try {\n      const targetPath = configPath || this.findConfigFile();\n\n      if (!targetPath || !fs.existsSync(targetPath)) {\n        errors.push('Configuration file not found');\n        return { valid: false, errors };\n      }\n\n      const configContent = await fs.promises.readFile(targetPath, 'utf8');\n      const parsedToml = TOML.parse(configContent);\n\n      // éªŒè¯é…ç½® | Validate config\n      ConfigSchema.parse(parsedToml);\n\n      return { valid: true, errors: [] };\n    } catch (error) {\n      if (error instanceof Error && 'issues' in error) {\n        const zodError = error as ZodError;\n        for (const issue of zodError.issues) {\n          errors.push(`${issue.path.join('.')}: ${issue.message}`);\n        }\n      } else {\n        errors.push(error instanceof Error ? error.message : 'Unknown error');\n      }\n\n      return { valid: false, errors };\n    }\n  }\n\n  /**\n   * åˆ«åæ–¹æ³• - ä¸ºäº†å‘åå…¼å®¹\n   */\n  async load(configPath?: string): Promise<Config> {\n    return this.loadConfig({ customPath: configPath });\n  }\n\n  /**\n   * è·å–é…ç½®æºè·¯å¾„\n   */\n  getConfigSource(): string | null {\n    return this.configPath;\n  }\n\n  /**\n   * æ£€æŸ¥é…ç½®æ–‡ä»¶æ˜¯å¦å­˜åœ¨\n   */\n  async configExists(configPath?: string): Promise<boolean> {\n    const targetPath = configPath || this.findConfigFile();\n    return targetPath !== null && fs.existsSync(targetPath);\n  }\n\n  /**\n   * åˆ›å»ºé»˜è®¤é…ç½®æ–‡ä»¶\n   */\n  async createDefaultConfig(configPath?: string): Promise<void> {\n    const defaultConfig = ConfigSchema.parse({});\n    const targetPath = configPath || path.join(process.cwd(), 'statusline.config.toml');\n\n    const tomlContent = TOML.stringify(defaultConfig as TOML.JsonMap);\n    await fs.promises.writeFile(targetPath, tomlContent, 'utf8');\n\n    this.configPath = targetPath;\n    this.cachedConfig = defaultConfig;\n  }\n\n  /**\n   * ä¿å­˜é…ç½®åˆ°æ–‡ä»¶\n   */\n  async save(config: Config, configPath?: string): Promise<void> {\n    const targetPath =\n      configPath || this.configPath || path.join(process.cwd(), 'statusline.config.toml');\n    const tomlContent = TOML.stringify(config as TOML.JsonMap);\n    await fs.promises.writeFile(targetPath, tomlContent, 'utf8');\n    this.cachedConfig = config;\n    this.configPath = targetPath;\n  }\n\n  /**\n   * é‡ç½®é…ç½®åˆ°é»˜è®¤å€¼\n   */\n  async resetToDefaults(configPath?: string): Promise<void> {\n    const defaultConfig = ConfigSchema.parse({});\n    await this.save(defaultConfig, configPath);\n  }\n\n  /**\n   * åº”ç”¨ä¸»é¢˜\n   */\n  async applyTheme(themeName: string, configPath?: string): Promise<void> {\n    const currentConfig = await this.load(configPath);\n\n    // è¿™é‡Œåº”è¯¥æœ‰ä¸»é¢˜é…ç½®é€»è¾‘ï¼Œæš‚æ—¶ç®€åŒ–å¤„ç†\n    const themedConfig = {\n      ...currentConfig,\n      theme: themeName,\n    };\n\n    await this.save(themedConfig, configPath);\n  }\n\n  /**\n   * è·å–é»˜è®¤é…ç½®\n   */\n  getDefaultConfig(): Config {\n    return ConfigSchema.parse({});\n  }\n}\n\n// å¯¼å‡ºå•ä¾‹å®ä¾‹ | Export singleton instance\nexport const configLoader = new ConfigLoader();\n","import type { ComponentConfig, RenderContext } from '../config/schema.js';\n\n/**\n * ç»„ä»¶æ¸²æŸ“ç»“æœæ¥å£ | Component render result interface\n */\nexport interface ComponentResult {\n  /** æ¸²æŸ“åçš„å­—ç¬¦ä¸²å†…å®¹ï¼Œnullè¡¨ç¤ºä¸æ˜¾ç¤º | Rendered string content, null means not displayed */\n  content: string | null;\n  /** æ˜¯å¦æˆåŠŸæ¸²æŸ“ | Whether rendering was successful */\n  success: boolean;\n  /** é”™è¯¯ä¿¡æ¯ï¼ˆå¦‚æœæœ‰ï¼‰ | Error message (if any) */\n  error?: string;\n}\n\n/**\n * ç»„ä»¶åŸºç±»æ¥å£ | Component base interface\n */\nexport interface Component {\n  /** ç»„ä»¶åç§° | Component name */\n  readonly name: string;\n  /** æ˜¯å¦å¯ç”¨ | Whether enabled */\n  readonly enabled: boolean;\n  /** æ¸²æŸ“ç»„ä»¶ | Render component */\n  render(context: RenderContext): ComponentResult | Promise<ComponentResult>;\n}\n\n/**\n * æŠ½è±¡ç»„ä»¶åŸºç±» | Abstract component base class\n * æä¾›é€šç”¨çš„ç»„ä»¶åŠŸèƒ½å’Œæ¨¡æ¿æ–¹æ³• | Provides common component functionality and template methods\n */\nexport abstract class BaseComponent implements Component {\n  public readonly name: string;\n  protected config: ComponentConfig;\n  protected renderContext?: RenderContext;\n\n  constructor(name: string, config: ComponentConfig) {\n    this.name = name;\n    this.config = config;\n  }\n\n  /** ç»„ä»¶æ˜¯å¦å¯ç”¨ | Whether component is enabled */\n  get enabled(): boolean {\n    return this.config.enabled ?? true;\n  }\n\n  /**\n   * æ¸²æŸ“ç»„ä»¶ | Render component\n   */\n  public render(context: RenderContext): ComponentResult | Promise<ComponentResult> {\n    this.renderContext = context;\n\n    // æ£€æŸ¥ç»„ä»¶æ˜¯å¦å¯ç”¨ | Check if component is enabled\n    if (!this.enabled) {\n      return { content: null, success: true };\n    }\n\n    try {\n      const content = this.renderContent(context);\n\n      // å¤„ç†å¼‚æ­¥æ¸²æŸ“ | Handle async rendering\n      if (content instanceof Promise) {\n        return content\n          .then((result) => ({ content: result, success: true }))\n          .catch((error) => ({\n            content: null,\n            success: false,\n            error: error instanceof Error ? error.message : String(error),\n          }));\n      }\n\n      return { content, success: true };\n    } catch (error) {\n      return {\n        content: null,\n        success: false,\n        error: error instanceof Error ? error.message : String(error),\n      };\n    }\n  }\n\n  /**\n   * æ¸²æŸ“ç»„ä»¶å†…å®¹ - å­ç±»éœ€è¦å®ç° | Render component content - subclasses need to implement\n   */\n  protected abstract renderContent(context: RenderContext): string | null | Promise<string | null>;\n\n  /**\n   * è·å–é¢œè‰²ä»£ç  | Get color code\n   */\n  protected getColor(colorName: string): string {\n    if (!this.renderContext?.colors) return '';\n    return this.renderContext.colors[colorName] || '';\n  }\n\n  /**\n   * è·å–é‡ç½®é¢œè‰²ä»£ç  | Get reset color code\n   */\n  protected getResetColor(): string {\n    if (!this.renderContext?.colors) return '';\n    return this.renderContext.colors.reset || '';\n  }\n\n  /**\n   * è·å–å›¾æ ‡ | Get icon\n   */\n  protected getIcon(iconName: string): string {\n    if (!this.renderContext?.icons) return '';\n    return this.renderContext.icons[iconName] || '';\n  }\n\n  /**\n   * åº”ç”¨é¢œè‰²å’Œé‡ç½® | Apply color and reset\n   */\n  protected colorize(content: string, colorName: string): string {\n    if (!content) return '';\n    if (!this.renderContext?.capabilities?.colors) return content;\n    const color = this.getColor(colorName);\n    const reset = this.getResetColor();\n    return `${color}${content}${reset}`;\n  }\n\n  /**\n   * æ ¼å¼åŒ–ç»„ä»¶è¾“å‡º | Format component output\n   */\n  protected formatOutput(icon: string, text: string, colorName?: string): string {\n    const formattedText = `${icon} ${text}`;\n    return colorName ? this.colorize(formattedText, colorName) : formattedText;\n  }\n}\n\n/**\n * ç»„ä»¶å·¥å‚æ¥å£ | Component factory interface\n */\nexport interface ComponentFactory {\n  /** åˆ›å»ºç»„ä»¶å®ä¾‹ | Create component instance */\n  createComponent(name: string, config: ComponentConfig): Component;\n  /** è·å–æ”¯æŒçš„ç»„ä»¶ç±»å‹ | Get supported component types */\n  getSupportedTypes(): string[];\n}\n\n/**\n * ç»„ä»¶æ³¨å†Œè¡¨ | Component registry\n */\nexport class ComponentRegistry {\n  private factories = new Map<string, ComponentFactory>();\n\n  /**\n   * æ³¨å†Œç»„ä»¶å·¥å‚ | Register component factory\n   */\n  register(type: string, factory: ComponentFactory): void {\n    this.factories.set(type, factory);\n  }\n\n  /**\n   * åˆ›å»ºç»„ä»¶ | Create component\n   */\n  create(type: string, name: string, config: ComponentConfig): Component | null {\n    const factory = this.factories.get(type);\n    if (!factory) {\n      console.warn(`Unknown component type: ${type}`);\n      return null;\n    }\n    return factory.createComponent(name, config);\n  }\n\n  /**\n   * è·å–æ‰€æœ‰æ³¨å†Œçš„ç»„ä»¶ç±»å‹ | Get all registered component types\n   */\n  getRegisteredTypes(): string[] {\n    return Array.from(this.factories.keys());\n  }\n}\n","import { execSync } from 'node:child_process';\nimport type { BranchComponentConfig, ComponentConfig, RenderContext } from '../config/schema.js';\nimport { BaseComponent, type ComponentFactory } from './base.js';\n\n/**\n * åˆ†æ”¯ç»„ä»¶ | Branch component\n * æ˜¾ç¤ºå½“å‰Gitåˆ†æ”¯ä¿¡æ¯ | Display current Git branch information\n */\nexport class BranchComponent extends BaseComponent {\n  private branchConfig: BranchComponentConfig;\n\n  constructor(name: string, config: BranchComponentConfig) {\n    super(name, config);\n    this.branchConfig = config;\n  }\n\n  protected renderContent(context: RenderContext): string | null {\n    const { inputData, config } = context;\n\n    let branch = inputData.gitBranch;\n\n    // å¦‚æœæ²¡æœ‰æä¾›åˆ†æ”¯ä¿¡æ¯ï¼Œå°è¯•é€šè¿‡Gitå‘½ä»¤è·å– | If no branch info provided, try to get via Git command\n    if (!branch) {\n      try {\n        branch = execSync('git rev-parse --abbrev-ref HEAD 2>/dev/null', {\n          cwd: inputData.workspace?.current_dir || inputData.cwd,\n          encoding: 'utf8',\n          timeout: config.advanced?.git_timeout || 1000,\n        }).trim();\n      } catch (_error) {\n        branch = 'no-git';\n      }\n    }\n\n    // æ£€æŸ¥æ˜¯å¦åœ¨æ— Gitæ—¶æ˜¾ç¤º | Check if should display when no Git\n    if (branch === 'no-git' && !this.branchConfig.show_when_no_git) {\n      return null;\n    }\n\n    // æˆªæ–­è¿‡é•¿çš„åˆ†æ”¯å | Truncate long branch names\n    let displayBranch = branch;\n    const maxLength = this.branchConfig.max_length;\n    if (maxLength && displayBranch.length > maxLength) {\n      displayBranch = `${displayBranch.substring(0, maxLength - 3)}...`;\n    }\n\n    // è·å–æ˜¾ç¤ºé…ç½® | Get display configuration\n    const icon = this.getIcon('branch');\n    const colorName = this.branchConfig.color || 'green';\n\n    return this.formatOutput(icon, displayBranch, colorName);\n  }\n}\n\n/**\n * åˆ†æ”¯ç»„ä»¶å·¥å‚ | Branch component factory\n */\nexport class BranchComponentFactory implements ComponentFactory {\n  createComponent(name: string, config: ComponentConfig): BranchComponent {\n    return new BranchComponent(name, config as BranchComponentConfig);\n  }\n\n  getSupportedTypes(): string[] {\n    return ['branch'];\n  }\n}\n","import type { ComponentConfig, ModelComponentConfig, RenderContext } from '../config/schema.js';\nimport { BaseComponent, type ComponentFactory } from './base.js';\n\n/**\n * é»˜è®¤æ¨¡å‹é…ç½® | Default model configurations\n */\nconst DEFAULT_MODEL_CONFIGS = {\n  'claude-sonnet-4': { contextWindow: 200000, shortName: 'S4' },\n  'claude-sonnet-3.7': { contextWindow: 200000, shortName: 'S3.7' },\n  'claude-opus-4.1': { contextWindow: 200000, shortName: 'O4.1' },\n  'claude-haiku-3.5': { contextWindow: 200000, shortName: 'H3.5' },\n} as const;\n\n/**\n * æ¨¡å‹ä¿¡æ¯æ¥å£ | Model info interface\n */\ninterface ModelInfo {\n  contextWindow: number;\n  shortName: string;\n}\n\n/**\n * æ¨¡å‹ç»„ä»¶ | Model component\n * æ˜¾ç¤ºå½“å‰ä½¿ç”¨çš„æ¨¡å‹ä¿¡æ¯ | Display current model information\n */\nexport class ModelComponent extends BaseComponent {\n  private modelConfig: ModelComponentConfig;\n\n  constructor(name: string, config: ModelComponentConfig) {\n    super(name, config);\n    this.modelConfig = config;\n  }\n\n  protected renderContent(context: RenderContext): string | null {\n    const { inputData } = context;\n\n    // è·å–æ¨¡å‹ä¿¡æ¯ | Get model info\n    const modelId = inputData.model?.id || inputData.model?.display_name;\n    if (!modelId) return null;\n\n    const modelInfo = this.getModelInfo(modelId);\n\n    // ç¡®å®šæ˜¾ç¤ºåç§° | Determine display name\n    const displayName = this.modelConfig.show_full_name\n      ? inputData.model?.display_name || inputData.model?.id || '?'\n      : modelInfo.shortName;\n\n    // è·å–æ˜¾ç¤ºé…ç½® | Get display configuration\n    const icon = this.getIcon('model');\n    const colorName = this.modelConfig.color || 'blue';\n\n    return this.formatOutput(icon, displayName, colorName);\n  }\n\n  /**\n   * è·å–æ¨¡å‹é…ç½®ä¿¡æ¯ | Get model configuration info\n   */\n  private getModelInfo(modelId: string): ModelInfo {\n    if (!modelId) {\n      return { contextWindow: 200000, shortName: '?' };\n    }\n\n    // æ£€æŸ¥è‡ªå®šä¹‰åç§°æ˜ å°„ | Check custom name mapping\n    const customNames = this.modelConfig.custom_names || {};\n\n    // æŸ¥æ‰¾é¢„å®šä¹‰é…ç½® | Find predefined configuration\n    const modelKey = Object.keys(DEFAULT_MODEL_CONFIGS).find((key) =>\n      modelId.toLowerCase().includes(key.toLowerCase())\n    );\n\n    if (modelKey) {\n      const config = DEFAULT_MODEL_CONFIGS[modelKey as keyof typeof DEFAULT_MODEL_CONFIGS];\n      const customName = customNames[modelKey];\n      return {\n        contextWindow: config.contextWindow,\n        shortName: customName || config.shortName,\n      };\n    }\n\n    // å›é€€é€»è¾‘ - è§£ææ¨¡å‹åç§° | Fallback logic - parse model name\n    let shortName = 'Unknown';\n    const lowerModelId = modelId.toLowerCase();\n\n    if (lowerModelId.includes('sonnet')) {\n      const match = modelId.match(/sonnet[\\s-]*(\\d+(?:\\.\\d+)?)/i);\n      shortName = match ? `S${match[1]}` : 'S?';\n    } else if (lowerModelId.includes('opus')) {\n      const match = modelId.match(/opus[\\s-]*(\\d+(?:\\.\\d+)?)/i);\n      shortName = match ? `O${match[1]}` : 'O?';\n    } else if (lowerModelId.includes('haiku')) {\n      const match = modelId.match(/haiku[\\s-]*(\\d+(?:\\.\\d+)?)/i);\n      shortName = match ? `H${match[1]}` : 'H?';\n    } else {\n      // æå–å­—æ¯æ•°å­—å­—ç¬¦ä½œä¸ºç®€ç§° | Extract alphanumeric characters as short name\n      shortName = modelId\n        .replace(/[^a-zA-Z0-9]/g, '')\n        .substring(0, 4)\n        .toUpperCase();\n    }\n\n    // æ£€æŸ¥æ˜¯å¦æœ‰è‡ªå®šä¹‰åç§° | Check for custom names\n    for (const [key, customName] of Object.entries(customNames)) {\n      if (lowerModelId.includes(key.toLowerCase())) {\n        shortName = customName;\n        break;\n      }\n    }\n\n    return { contextWindow: 200000, shortName };\n  }\n}\n\n/**\n * æ¨¡å‹ç»„ä»¶å·¥å‚ | Model component factory\n */\nexport class ModelComponentFactory implements ComponentFactory {\n  createComponent(name: string, config: ComponentConfig): ModelComponent {\n    return new ModelComponent(name, config as ModelComponentConfig);\n  }\n\n  getSupportedTypes(): string[] {\n    return ['model'];\n  }\n}\n","import path from 'node:path';\nimport type { ComponentConfig, ProjectComponentConfig, RenderContext } from '../config/schema.js';\nimport { BaseComponent, type ComponentFactory } from './base.js';\n\n/**\n * é¡¹ç›®ç»„ä»¶ | Project component\n * æ˜¾ç¤ºå½“å‰é¡¹ç›®/ç›®å½•åç§° | Display current project/directory name\n */\nexport class ProjectComponent extends BaseComponent {\n  private projectConfig: ProjectComponentConfig;\n\n  constructor(name: string, config: ProjectComponentConfig) {\n    super(name, config);\n    this.projectConfig = config;\n  }\n\n  protected renderContent(context: RenderContext): string | null {\n    const { inputData } = context;\n\n    // è·å–é¡¹ç›®è·¯å¾„ | Get project path\n    const projectPath =\n      inputData.workspace?.project_dir || inputData.workspace?.current_dir || inputData.cwd;\n\n    if (!projectPath) return null;\n\n    // æå–é¡¹ç›®åç§° | Extract project name\n    const projectName = path.basename(projectPath);\n\n    // æ£€æŸ¥æ˜¯å¦æ˜¾ç¤ºç©ºé¡¹ç›®å | Check if empty project name should be displayed\n    if (projectName === '.' || (projectName === '' && !this.projectConfig.show_when_empty)) {\n      return null;\n    }\n\n    // è·å–æ˜¾ç¤ºé…ç½® | Get display configuration\n    const icon = this.getIcon('project');\n    const colorName = this.projectConfig.color || 'cyan';\n\n    return this.formatOutput(icon, projectName, colorName);\n  }\n}\n\n/**\n * é¡¹ç›®ç»„ä»¶å·¥å‚ | Project component factory\n */\nexport class ProjectComponentFactory implements ComponentFactory {\n  createComponent(name: string, config: ComponentConfig): ProjectComponent {\n    return new ProjectComponent(name, config as ProjectComponentConfig);\n  }\n\n  getSupportedTypes(): string[] {\n    return ['project'];\n  }\n}\n","import { existsSync, readFileSync, statSync } from 'node:fs';\nimport type {\n  ComponentConfig,\n  RenderContext,\n  StatusComponentConfig,\n  TranscriptEntry,\n} from '../config/schema.js';\nimport { BaseComponent, type ComponentFactory } from './base.js';\n\n/**\n * çŠ¶æ€ä¿¡æ¯ç±»å‹ | Status info type\n */\ntype StatusType = 'ready' | 'thinking' | 'tool' | 'error' | 'warning';\n\n/**\n * çŠ¶æ€ä¿¡æ¯æ¥å£ | Status info interface\n */\ninterface StatusInfo {\n  type: StatusType;\n  message: string;\n  details?: string;\n}\n\n/**\n * Statusç»„ä»¶ | Status component\n * æ˜¾ç¤ºå½“å‰Claudeä¼šè¯çŠ¶æ€ | Display current Claude session status\n */\nexport class StatusComponent extends BaseComponent {\n  private statusConfig: StatusComponentConfig;\n  private cachedStatus: StatusInfo | null = null;\n  private lastTranscriptMtime: number | null = null;\n\n  constructor(name: string, config: StatusComponentConfig) {\n    super(name, config);\n    this.statusConfig = config;\n  }\n\n  protected renderContent(context: RenderContext): string | null {\n    const { inputData } = context;\n\n    // æ£€æŸ¥æ˜¯å¦æœ‰Mockæ•°æ® | Check for mock data\n    const mockData = (inputData as Record<string, unknown>).__mock__;\n    if (mockData && typeof mockData === 'object' && 'status' in mockData) {\n      return this.renderMockStatus((mockData as Record<string, unknown>).status as string);\n    }\n\n    if (!inputData.transcriptPath) {\n      return this.renderDefaultStatus();\n    }\n\n    const statusInfo = this.parseTranscriptStatus(inputData.transcriptPath, context);\n    if (!statusInfo) {\n      return this.renderDefaultStatus();\n    }\n\n    return this.formatStatusDisplay(statusInfo);\n  }\n\n  /**\n   * æ¸²æŸ“MockçŠ¶æ€ | Render mock status\n   */\n  private renderMockStatus(status: string): string {\n    const statusMap: { [key: string]: { type: StatusType; message: string } } = {\n      ready: { type: 'ready', message: 'Ready' },\n      thinking: { type: 'thinking', message: 'Thinking...' },\n      tool_use: { type: 'tool', message: 'Tool Use' },\n      error: { type: 'error', message: 'Error' },\n      complete: { type: 'ready', message: 'Complete' },\n    };\n\n    const statusInfo = statusMap[status] || { type: 'ready', message: 'Ready' };\n    return this.formatStatusDisplay(statusInfo);\n  }\n\n  /**\n   * æ¸²æŸ“é»˜è®¤çŠ¶æ€ | Render default status\n   */\n  private renderDefaultStatus(): string {\n    const icon = this.getIcon('ready');\n    const colorName = this.statusConfig.colors?.ready || 'green';\n    return this.formatOutput(icon, 'Ready', colorName);\n  }\n\n  /**\n   * è§£ætranscriptçŠ¶æ€ | Parse transcript status\n   */\n  private parseTranscriptStatus(transcriptPath: string, context: RenderContext): StatusInfo | null {\n    // æ£€æŸ¥æ–‡ä»¶å­˜åœ¨æ€§ | Check file existence\n    let fileExists = false;\n    try {\n      fileExists = existsSync(transcriptPath) && statSync(transcriptPath).isFile();\n    } catch (_error) {\n      return null;\n    }\n\n    if (!fileExists) {\n      return { type: 'ready', message: 'Ready' };\n    }\n\n    try {\n      const stat = statSync(transcriptPath);\n      const currentMtime = stat.mtime.getTime();\n\n      // æ£€æŸ¥ç¼“å­˜ | Check cache\n      const cacheEnabled = context.config.advanced?.cache_enabled ?? true;\n      if (cacheEnabled && this.cachedStatus && this.lastTranscriptMtime === currentMtime) {\n        return this.cachedStatus;\n      }\n\n      const transcript = readFileSync(transcriptPath, 'utf8');\n      const lines = transcript.trim().split('\\n');\n\n      let lastStopReason: string | null = null;\n      let lastToolCall: string | null = null;\n      let lastEntryType: string | null = null;\n      let assistantError = false;\n      let errorDetails = 'Error';\n      let _lastAssistantIndex = -1;\n\n      // æŸ¥æ‰¾æœ€æ–°çš„assistantæ¶ˆæ¯ | Find latest assistant message\n      for (let i = lines.length - 1; i >= 0; i--) {\n        const line = lines[i]?.trim();\n        if (!line) continue;\n\n        try {\n          const entry = JSON.parse(line) as TranscriptEntry;\n\n          if (!lastEntryType) {\n            lastEntryType = entry.type;\n          }\n\n          // æŸ¥æ‰¾assistantæ¶ˆæ¯çš„usageå’Œstop_reason | Find assistant message usage and stop_reason\n          if (entry.type === 'assistant' && entry.message && 'usage' in entry.message) {\n            lastStopReason = entry.message?.stop_reason || null;\n            _lastAssistantIndex = i;\n\n            // æ£€æŸ¥æ˜¯å¦æœ‰é”™è¯¯ | Check for errors\n            assistantError = this.isErrorEntry(entry);\n            if (assistantError) {\n              errorDetails = this.getErrorDetails(entry);\n            }\n            break;\n          }\n        } catch (_parseError) {}\n      }\n\n      // æŸ¥æ‰¾æœ€è¿‘çš„å·¥å…·è°ƒç”¨ | Find recent tool calls\n      const recentErrorCount = context.config.advanced?.recent_error_count || 5;\n      const recentLines = lines.slice(-recentErrorCount);\n\n      for (const line of recentLines) {\n        if (!line.trim()) continue;\n\n        try {\n          const entry = JSON.parse(line) as TranscriptEntry;\n\n          if (\n            'message' in entry &&\n            entry.message?.content &&\n            Array.isArray(entry.message.content)\n          ) {\n            const toolUse = entry.message.content.find(\n              (item: unknown) =>\n                typeof item === 'object' &&\n                item !== null &&\n                'type' in item &&\n                (item as Record<string, unknown>).type === 'tool_use'\n            );\n            if (toolUse && typeof toolUse === 'object' && 'name' in toolUse) {\n              lastToolCall = toolUse.name as string;\n            }\n          }\n        } catch (_parseError) {\n          // å¿½ç•¥å•è¡Œè§£æé”™è¯¯ | Ignore single line parse errors\n        }\n      }\n\n      // ç¡®å®šçŠ¶æ€ | Determine status\n      let statusInfo: StatusInfo;\n\n      if (assistantError) {\n        statusInfo = { type: 'error', message: errorDetails, details: errorDetails };\n      } else if (lastStopReason === 'tool_use') {\n        const toolInfo = lastToolCall ? ` ${lastToolCall}` : '';\n        statusInfo = {\n          type: 'tool',\n          message: `Tool${toolInfo}`,\n          details: lastToolCall || '',\n        };\n      } else if (lastStopReason === 'end_turn') {\n        statusInfo = { type: 'ready', message: 'Ready' };\n      } else if (lastStopReason === null) {\n        // å½“stop_reasonä¸ºnullæ—¶ï¼Œæ™ºèƒ½åˆ¤æ–­ | Smart inference when stop_reason is null\n        if (lastEntryType === 'user') {\n          statusInfo = { type: 'thinking', message: 'Thinking' };\n        } else {\n          statusInfo = { type: 'ready', message: 'Ready' };\n        }\n      } else {\n        // å…¶ä»–æœªçŸ¥çŠ¶æ€ | Other unknown states\n        statusInfo = { type: 'ready', message: 'Ready' };\n      }\n\n      // ç¼“å­˜ç»“æœ | Cache result\n      if (cacheEnabled) {\n        this.cachedStatus = statusInfo;\n        this.lastTranscriptMtime = currentMtime;\n      }\n\n      return statusInfo;\n    } catch (error) {\n      console.error('Error parsing transcript status:', error);\n      return null;\n    }\n  }\n\n  /**\n   * æ£€æµ‹æ¡ç›®æ˜¯å¦åŒ…å«çœŸæ­£çš„é”™è¯¯ | Detect if entry contains real errors\n   */\n  private isErrorEntry(entry: Record<string, unknown>): boolean {\n    // æ£€æŸ¥å·¥å…·ä½¿ç”¨ç»“æœä¸­çš„é”™è¯¯ï¼Œä½†æ’é™¤æƒé™ç›¸å…³çš„é˜»æ­¢ | Check for errors in tool use results, excluding permission-related blocks\n    if ((entry as Record<string, unknown>).toolUseResult) {\n      const toolUseResult = (entry as Record<string, unknown>).toolUseResult as Record<\n        string,\n        unknown\n      >;\n      const errorMsg = toolUseResult.error || toolUseResult;\n      if (\n        typeof errorMsg === 'string' &&\n        (errorMsg.includes('was blocked') || errorMsg.includes('For security'))\n      ) {\n        return false;\n      }\n      if (toolUseResult.error || toolUseResult.type === 'error') {\n        return true;\n      }\n    }\n\n    // æ£€æŸ¥stop_reasonä¸ºstop_sequenceçš„APIé”™è¯¯ | Check for API errors with stop_reason as stop_sequence\n    const message = (entry as Record<string, unknown>).message as\n      | Record<string, unknown>\n      | undefined;\n    if (message?.stop_reason === 'stop_sequence') {\n      if (message?.content && Array.isArray(message.content)) {\n        for (const item of message.content as Array<Record<string, unknown>>) {\n          if (item.type === 'text' && item.text) {\n            const text = item.text as string;\n            // API Error 403 é…é¢ä¸è¶³ | API Error 403 insufficient quota\n            if (text.startsWith('API Error: 403') && text.includes('user quota is not enough')) {\n              return true;\n            }\n            // filteré”™è¯¯ | filter error\n            if (text.includes('filter')) {\n              return true;\n            }\n          }\n        }\n      }\n    }\n\n    return false;\n  }\n\n  /**\n   * è·å–é”™è¯¯è¯¦ç»†ä¿¡æ¯ | Get error details\n   */\n  private getErrorDetails(entry: Record<string, unknown>): string {\n    // æ£€æŸ¥stop_reasonä¸ºstop_sequenceçš„APIé”™è¯¯ | Check for API errors with stop_reason as stop_sequence\n    const message = (entry as Record<string, unknown>).message as\n      | Record<string, unknown>\n      | undefined;\n    if (message?.stop_reason === 'stop_sequence') {\n      if (message?.content && Array.isArray(message.content)) {\n        for (const item of message.content as Array<Record<string, unknown>>) {\n          if (item.type === 'text' && item.text) {\n            const text = item.text as string;\n            // API Error 403 é…é¢ä¸è¶³ | API Error 403 insufficient quota\n            if (text.startsWith('API Error: 403') && text.includes('user quota is not enough')) {\n              return '403é…é¢ä¸è¶³';\n            }\n            // filteré”™è¯¯ | filter error\n            if (text.includes('filter')) {\n              return 'Filteré”™è¯¯';\n            }\n          }\n        }\n      }\n    }\n    return 'Error';\n  }\n\n  /**\n   * æ ¼å¼åŒ–çŠ¶æ€æ˜¾ç¤º | Format status display\n   */\n  private formatStatusDisplay(statusInfo: StatusInfo): string {\n    const { type, message } = statusInfo;\n\n    // è·å–å›¾æ ‡å’Œé¢œè‰² | Get icon and color\n    const icon = this.getIcon(type);\n    const colorName = this.statusConfig.colors?.[type] || this.getDefaultColor(type);\n\n    return this.formatOutput(icon, message, colorName);\n  }\n\n  /**\n   * è·å–é»˜è®¤é¢œè‰² | Get default color\n   */\n  private getDefaultColor(type: StatusType): string {\n    const colorMap: Record<StatusType, string> = {\n      ready: 'green',\n      thinking: 'yellow',\n      tool: 'blue',\n      error: 'red',\n      warning: 'yellow',\n    };\n    return colorMap[type] || 'white';\n  }\n}\n\n/**\n * Statusç»„ä»¶å·¥å‚ | Status component factory\n */\nexport class StatusComponentFactory implements ComponentFactory {\n  createComponent(name: string, config: ComponentConfig): StatusComponent {\n    return new StatusComponent(name, config as StatusComponentConfig);\n  }\n\n  getSupportedTypes(): string[] {\n    return ['status'];\n  }\n}\n","import { existsSync, readFileSync, statSync } from 'node:fs';\nimport type {\n  ComponentConfig,\n  RenderContext,\n  TokensComponentConfig,\n  TranscriptEntry,\n} from '../config/schema.js';\nimport { BaseComponent, type ComponentFactory } from './base.js';\n\n/**\n * Tokenä½¿ç”¨ä¿¡æ¯æ¥å£ | Token usage info interface\n */\ninterface TokenUsageInfo {\n  contextUsedTokens: number;\n  contextWindow: number;\n  usagePercentage: number;\n  progressBar?: string;\n  warning?: boolean;\n  critical?: boolean;\n}\n\n/**\n * Tokensç»„ä»¶ | Tokens component\n * æ˜¾ç¤ºå½“å‰ä¸Šä¸‹æ–‡Tokenä½¿ç”¨æƒ…å†µ | Display current context token usage\n */\nexport class TokensComponent extends BaseComponent {\n  private tokensConfig: TokensComponentConfig;\n  private cachedTranscriptData: TokenUsageInfo | null = null;\n  private lastTranscriptMtime: number | null = null;\n\n  constructor(name: string, config: TokensComponentConfig) {\n    super(name, config);\n    this.tokensConfig = config;\n  }\n\n  protected renderContent(context: RenderContext): string | null {\n    const { inputData } = context;\n\n    // æ£€æŸ¥æ˜¯å¦æœ‰Mockæ•°æ® | Check for mock data\n    const mockData = (inputData as Record<string, unknown>).__mock__;\n    if (mockData && typeof (mockData as Record<string, unknown>).tokenUsage === 'number') {\n      return this.renderMockTokenData(\n        (mockData as Record<string, unknown>).tokenUsage as number,\n        (mockData as Record<string, unknown>).status as string\n      );\n    }\n\n    if (!inputData.transcriptPath) {\n      return this.renderNoTranscript();\n    }\n\n    const tokenUsage = this.parseTranscriptFile(inputData.transcriptPath, context);\n    if (!tokenUsage) {\n      return this.renderNoTranscript();\n    }\n\n    return this.formatTokenDisplay(tokenUsage);\n  }\n\n  /**\n   * æ¸²æŸ“Mockæ•°æ® | Render mock token data\n   */\n  private renderMockTokenData(tokenUsagePercent: number, _status?: string): string | null {\n    const contextWindow = this.getContextWindow();\n    const contextUsedTokens = Math.floor((tokenUsagePercent / 100) * contextWindow);\n\n    const tokenUsage: TokenUsageInfo = {\n      contextUsedTokens,\n      contextWindow,\n      usagePercentage: tokenUsagePercent,\n      warning: tokenUsagePercent > (this.tokensConfig.thresholds?.warning || 60),\n      critical: tokenUsagePercent > (this.tokensConfig.thresholds?.critical || 95),\n    };\n\n    // ç”Ÿæˆè¿›åº¦æ¡ | Generate progress bar\n    if (this.tokensConfig.show_progress_bar) {\n      tokenUsage.progressBar = this.generateProgressBar(tokenUsagePercent);\n    }\n\n    return this.formatTokenDisplay(tokenUsage);\n  }\n\n  /**\n   * æ¸²æŸ“æ— transcriptæ–‡ä»¶æ—¶çš„æ˜¾ç¤º | Render display when no transcript file\n   */\n  private renderNoTranscript(): string | null {\n    const contextWindow = this.getContextWindow();\n    const tokenUsage: TokenUsageInfo = {\n      contextUsedTokens: 0,\n      contextWindow,\n      usagePercentage: 0,\n      warning: false,\n      critical: false,\n    };\n\n    // ç”Ÿæˆç©ºè¿›åº¦æ¡ | Generate empty progress bar\n    if (this.tokensConfig.show_progress_bar) {\n      tokenUsage.progressBar = this.generateProgressBar(0);\n    }\n\n    return this.formatTokenDisplay(tokenUsage);\n  }\n\n  /**\n   * è§£ætranscriptæ–‡ä»¶ | Parse transcript file\n   */\n  private parseTranscriptFile(\n    transcriptPath: string,\n    context: RenderContext\n  ): TokenUsageInfo | null {\n    // æ£€æŸ¥æ–‡ä»¶å­˜åœ¨æ€§ | Check file existence\n    let fileExists = false;\n    try {\n      fileExists = existsSync(transcriptPath) && statSync(transcriptPath).isFile();\n    } catch (_error) {\n      return null;\n    }\n\n    if (!fileExists) {\n      return {\n        contextUsedTokens: 0,\n        contextWindow: this.getContextWindow(),\n        usagePercentage: 0,\n      };\n    }\n\n    try {\n      const stat = statSync(transcriptPath);\n      const currentMtime = stat.mtime.getTime();\n\n      // æ£€æŸ¥ç¼“å­˜ | Check cache\n      const cacheEnabled = context.config.advanced?.cache_enabled ?? true;\n      if (cacheEnabled && this.cachedTranscriptData && this.lastTranscriptMtime === currentMtime) {\n        return this.cachedTranscriptData;\n      }\n\n      const transcript = readFileSync(transcriptPath, 'utf8');\n      const lines = transcript.trim().split('\\n');\n\n      let contextUsedTokens = 0;\n\n      // ä»æœ€åå¼€å§‹æŸ¥æ‰¾æœ€æ–°çš„assistantæ¶ˆæ¯ | Find latest assistant message from the end\n      for (let i = lines.length - 1; i >= 0; i--) {\n        const line = lines[i]?.trim();\n        if (!line) continue;\n\n        try {\n          const entry = JSON.parse(line) as TranscriptEntry;\n\n          // æŸ¥æ‰¾åŒ…å«usageä¿¡æ¯çš„assistantæ¶ˆæ¯ | Find assistant message with usage info\n          if (entry.type === 'assistant' && entry.message && 'usage' in entry.message) {\n            const usage = entry.message.usage;\n            const requiredKeys = [\n              'input_tokens',\n              'cache_creation_input_tokens',\n              'cache_read_input_tokens',\n              'output_tokens',\n            ];\n\n            if (usage && requiredKeys.every((key) => key in usage)) {\n              contextUsedTokens =\n                usage.input_tokens +\n                usage.cache_creation_input_tokens +\n                usage.cache_read_input_tokens +\n                usage.output_tokens;\n              break;\n            }\n          }\n        } catch (_parseError) {}\n      }\n\n      const contextWindow = this.getContextWindow();\n      const usagePercentage = (contextUsedTokens / contextWindow) * 100;\n\n      const result: TokenUsageInfo = {\n        contextUsedTokens,\n        contextWindow,\n        usagePercentage,\n        warning: usagePercentage > (this.tokensConfig.thresholds?.warning || 60),\n        critical: usagePercentage > (this.tokensConfig.thresholds?.critical || 95),\n      };\n\n      // ç”Ÿæˆè¿›åº¦æ¡ | Generate progress bar\n      if (this.tokensConfig.show_progress_bar) {\n        result.progressBar = this.generateProgressBar(usagePercentage);\n      }\n\n      // ç¼“å­˜ç»“æœ | Cache result\n      if (cacheEnabled) {\n        this.cachedTranscriptData = result;\n        this.lastTranscriptMtime = currentMtime;\n      }\n\n      return result;\n    } catch (error) {\n      console.error('Error parsing transcript file:', error);\n      return null;\n    }\n  }\n\n  /**\n   * è·å–ä¸Šä¸‹æ–‡çª—å£å¤§å° | Get context window size\n   */\n  private getContextWindow(): number {\n    return this.tokensConfig.context_window || 200000;\n  }\n\n  /**\n   * ç”Ÿæˆè¿›åº¦æ¡ | Generate progress bar\n   */\n  private generateProgressBar(usagePercentage: number): string {\n    const width = this.tokensConfig.progress_bar_width || 10;\n    const filled = Math.round((usagePercentage / 100) * width);\n    const _empty = width - filled;\n\n    // ä½¿ç”¨é…ç½®çš„è¿›åº¦æ¡å­—ç¬¦ | Use configured progress bar characters\n    const filledChar = this.tokensConfig.progress_bar_chars?.filled || 'â–ˆ';\n    const emptyChar = this.tokensConfig.progress_bar_chars?.empty || 'â–‘';\n    const backupChar = this.tokensConfig.progress_bar_chars?.backup || 'â–“';\n\n    // 85%åä½¿ç”¨åå¤‡åŒºåŸŸå­—ç¬¦ | Use backup area character after 85%\n    let bar = '';\n    for (let i = 0; i < width; i++) {\n      const segmentPercentage = (i / width) * 100;\n      if (i < filled) {\n        bar += segmentPercentage >= 85 ? backupChar : filledChar;\n      } else {\n        bar += emptyChar;\n      }\n    }\n\n    return bar;\n  }\n\n  /**\n   * æ ¼å¼åŒ–Tokenæ˜¾ç¤º | Format token display\n   */\n  private formatTokenDisplay(tokenUsage: TokenUsageInfo): string {\n    const { contextUsedTokens, contextWindow, usagePercentage, progressBar, warning, critical } =\n      tokenUsage;\n\n    const icon = this.getIcon('token');\n\n    // ç¡®å®šé¢œè‰² | Determine color\n    let colorName = this.tokensConfig.color || 'yellow';\n    if (critical) {\n      colorName = 'red';\n    } else if (warning) {\n      colorName = 'yellow';\n    }\n\n    // æŒ‰åŸç‰ˆæ ¼å¼ï¼š[è¿›åº¦æ¡] ç™¾åˆ†æ¯” (å…·ä½“æ•°å€¼) | Format like original: [progressbar] percentage (specific numbers)\n    let displayText = '';\n\n    // 1. æ·»åŠ è¿›åº¦æ¡ (å¸¦æ–¹æ‹¬å·) | Add progress bar (with brackets)\n    if (progressBar) {\n      displayText += `[${progressBar}] `;\n    }\n\n    // 2. æ·»åŠ ç™¾åˆ†æ¯” | Add percentage\n    if (this.tokensConfig.show_percentage) {\n      displayText += `${usagePercentage.toFixed(1)}% `;\n    }\n\n    // 3. æ·»åŠ å…·ä½“æ•°å€¼ (æ›´ç²¾ç¡®çš„kæ˜¾ç¤º) | Add specific numbers (more precise k display)\n    const usedDisplay = this.tokensConfig.show_raw_numbers\n      ? contextUsedTokens.toString()\n      : `${(contextUsedTokens / 1000).toFixed(1)}k`;\n\n    const totalDisplay = this.tokensConfig.show_raw_numbers\n      ? contextWindow.toString()\n      : `${(contextWindow / 1000).toFixed(0)}k`;\n\n    displayText += `(${usedDisplay}/${totalDisplay})`;\n\n    // æ·»åŠ çŠ¶æ€æŒ‡ç¤ºå™¨ | Add status indicators\n    if (critical) {\n      displayText += ' ğŸ”¥';\n    } else if (warning) {\n      displayText += ' âš¡';\n    }\n\n    return this.formatOutput(icon, displayText, colorName);\n  }\n}\n\n/**\n * Tokensç»„ä»¶å·¥å‚ | Tokens component factory\n */\nexport class TokensComponentFactory implements ComponentFactory {\n  createComponent(name: string, config: ComponentConfig): TokensComponent {\n    return new TokensComponent(name, config as TokensComponentConfig);\n  }\n\n  getSupportedTypes(): string[] {\n    return ['tokens'];\n  }\n}\n","import type { Config } from '../config/schema.js';\nimport type { TerminalCapabilities } from './detector.js';\n\n/**\n * é¢œè‰²æ˜ å°„æ¥å£ | Color mapping interface\n */\nexport interface ColorMap {\n  [colorName: string]: string;\n}\n\n/**\n * å›¾æ ‡æ˜ å°„æ¥å£ | Icon mapping interface\n */\nexport interface IconMap {\n  [iconName: string]: string;\n}\n\n/**\n * ç»ˆç«¯é¢œè‰²å’Œå›¾æ ‡ç®¡ç†å™¨ | Terminal color and icon manager\n */\nexport class TerminalRenderer {\n  private colors: ColorMap;\n  private icons: IconMap;\n  private capabilities: TerminalCapabilities;\n\n  constructor(capabilities: TerminalCapabilities, config: Config) {\n    this.capabilities = capabilities;\n    this.colors = this.setupColors(config);\n    this.icons = this.setupIcons(config);\n  }\n\n  /**\n   * è·å–é¢œè‰²ä»£ç  | Get color code\n   */\n  public getColor(colorName: string): string {\n    return this.colors[colorName] || '';\n  }\n\n  /**\n   * è·å–å›¾æ ‡ | Get icon\n   */\n  public getIcon(iconName: string): string {\n    return this.icons[iconName] || '';\n  }\n\n  /**\n   * è·å–é‡ç½®é¢œè‰²ä»£ç  | Get reset color code\n   */\n  public getReset(): string {\n    return this.colors.reset || '';\n  }\n\n  /**\n   * åº”ç”¨é¢œè‰² | Apply color\n   */\n  public colorize(text: string, colorName: string): string {\n    if (!text || !this.capabilities.colors) return text;\n    const color = this.getColor(colorName);\n    const reset = this.getReset();\n    return `${color}${text}${reset}`;\n  }\n\n  /**\n   * è®¾ç½®é¢œè‰²ç³»ç»Ÿ | Setup color system\n   */\n  private setupColors(config: Config): ColorMap {\n    // åŸºç¡€ANSIé¢œè‰²æ˜ å°„ | Basic ANSI color mapping\n    const baseColors: ColorMap = {\n      reset: '\\x1b[0m',\n      bright: '\\x1b[1m',\n      dim: '\\x1b[2m',\n      black: '\\x1b[30m',\n      red: '\\x1b[31m',\n      green: '\\x1b[32m',\n      yellow: '\\x1b[33m',\n      blue: '\\x1b[34m',\n      magenta: '\\x1b[35m',\n      cyan: '\\x1b[36m',\n      white: '\\x1b[37m',\n      gray: '\\x1b[90m',\n      bright_red: '\\x1b[91m',\n      bright_green: '\\x1b[92m',\n      bright_yellow: '\\x1b[93m',\n      bright_blue: '\\x1b[94m',\n      bright_magenta: '\\x1b[95m',\n      bright_cyan: '\\x1b[96m',\n      bright_white: '\\x1b[97m',\n    };\n\n    // åˆå¹¶è‡ªå®šä¹‰é¢œè‰²ä»£ç  | Merge custom color codes\n    const customColors = config.advanced?.custom_color_codes || {};\n\n    // å¦‚æœä¸æ”¯æŒé¢œè‰²ï¼Œè¿”å›ç©ºå­—ç¬¦ä¸²æ˜ å°„ | If colors not supported, return empty string mapping\n    if (!this.capabilities.colors) {\n      const emptyColors: ColorMap = {};\n      for (const key of Object.keys({ ...baseColors, ...customColors })) {\n        emptyColors[key] = '';\n      }\n      return emptyColors;\n    }\n\n    return { ...baseColors, ...customColors };\n  }\n\n  /**\n   * è®¾ç½®å›¾æ ‡ç³»ç»Ÿ | Setup icon system\n   */\n  private setupIcons(config: Config): IconMap {\n    const components = config.components;\n\n    // ç¬¬ä¸€å±‚ï¼šNerd Fontå›¾æ ‡ (Font Awesomeç³»åˆ—) | First tier: Nerd Font icons (Font Awesome series)\n    const nerdFontIcons: IconMap = {\n      project: components?.project?.nerd_icon || '\\uf07b', // fa-folder\n      model: components?.model?.nerd_icon || '\\uf085', // fa-cogs (æœºå™¨/æ¨¡å‹)\n      branch: components?.branch?.nerd_icon || '\\uf126', // fa-code-branch (gitåˆ†æ”¯)\n      token: components?.tokens?.nerd_icon || '\\uf080', // fa-bar-chart\n      ready: components?.status?.nerd_icons?.ready || '\\uf00c', // fa-check\n      thinking: components?.status?.nerd_icons?.thinking || '\\uf110', // fa-spinner\n      tool: components?.status?.nerd_icons?.tool || '\\uf0ad', // fa-wrench\n      error: components?.status?.nerd_icons?.error || '\\uf00d', // fa-times\n      warning: components?.status?.nerd_icons?.warning || '\\uf071', // fa-exclamation-triangle\n    };\n\n    // ç¬¬äºŒå±‚ï¼šEmojiå›¾æ ‡ | Second tier: Emoji icons\n    const emojiIcons: IconMap = {\n      project: components?.project?.icon || 'ğŸ“',\n      model: components?.model?.icon || 'ğŸ¤–',\n      branch: components?.branch?.icon || 'ğŸŒ¿',\n      token: components?.tokens?.icon || 'ğŸ“Š',\n      ready: components?.status?.icons?.ready || 'âœ…',\n      thinking: components?.status?.icons?.thinking || 'ğŸ’­',\n      tool: components?.status?.icons?.tool || 'ğŸ”§',\n      error: components?.status?.icons?.error || 'âŒ',\n      warning: components?.status?.icons?.warning || 'âš ï¸',\n    };\n\n    // ç¬¬ä¸‰å±‚ï¼šæ–‡æœ¬å›¾æ ‡ | Third tier: Text icons\n    const textIcons: IconMap = {\n      project: components?.project?.text_icon || '[P]',\n      model: components?.model?.text_icon || '[M]',\n      branch: components?.branch?.text_icon || '[B]',\n      token: components?.tokens?.text_icon || '[T]',\n      ready: components?.status?.text_icons?.ready || '[OK]',\n      thinking: components?.status?.text_icons?.thinking || '[...]',\n      tool: components?.status?.text_icons?.tool || '[TOOL]',\n      error: components?.status?.text_icons?.error || '[ERR]',\n      warning: components?.status?.text_icons?.warning || '[WARN]',\n    };\n\n    // æ ¹æ®èƒ½åŠ›é€‰æ‹©å›¾æ ‡é›† | Select icon set based on capabilities\n    if (this.capabilities.nerdFont) {\n      return nerdFontIcons;\n    } else if (this.capabilities.emoji) {\n      return emojiIcons;\n    } else {\n      return textIcons;\n    }\n  }\n\n  /**\n   * è·å–æ‰€æœ‰é¢œè‰² | Get all colors\n   */\n  public getColors(): ColorMap {\n    return { ...this.colors };\n  }\n\n  /**\n   * è·å–æ‰€æœ‰å›¾æ ‡ | Get all icons\n   */\n  public getIcons(): IconMap {\n    return { ...this.icons };\n  }\n\n  /**\n   * è·å–ç»ˆç«¯èƒ½åŠ› | Get terminal capabilities\n   */\n  public getCapabilities(): TerminalCapabilities {\n    return { ...this.capabilities };\n  }\n\n  /**\n   * åˆ›å»ºæ ¼å¼åŒ–å­—ç¬¦ä¸² | Create formatted string\n   */\n  public format(icon: string, text: string, colorName?: string): string {\n    const iconStr = this.getIcon(icon);\n    const content = iconStr ? `${iconStr} ${text}` : text;\n    return colorName ? this.colorize(content, colorName) : content;\n  }\n}\n\n// å‘åå…¼å®¹çš„åˆ«å\nexport const ColorSystem = TerminalRenderer;\nexport const IconSystem = TerminalRenderer;\n","/**\n * ç»ˆç«¯èƒ½åŠ›æ£€æµ‹å™¨ | Terminal capability detector\n * æ£€æµ‹ç»ˆç«¯å¯¹é¢œè‰²ã€è¡¨æƒ…ç¬¦å·ã€Nerd Fontçš„æ”¯æŒ | Detect terminal support for colors, emojis, Nerd Font\n */\n\n/**\n * ç»ˆç«¯èƒ½åŠ›æ¥å£ | Terminal capabilities interface\n */\nexport interface TerminalCapabilities {\n  colors: boolean;\n  emoji: boolean;\n  nerdFont: boolean;\n}\n\n/**\n * è‡ªåŠ¨æ£€æµ‹é€‰é¡¹ | Auto-detection option\n */\nexport type AutoDetectOption = boolean | 'auto';\n\n/**\n * æ£€æµ‹é¢œè‰²æ”¯æŒ | Detect color support\n */\nfunction detectColors(enableColors: AutoDetectOption): boolean {\n  if (typeof enableColors === 'boolean') {\n    return enableColors;\n  }\n\n  // è‡ªåŠ¨æ£€æµ‹é¢œè‰²æ”¯æŒ | Auto-detect color support\n  return !!(\n    process.env.COLORTERM === 'truecolor' ||\n    process.env.TERM?.includes('256') ||\n    process.env.TERM_PROGRAM === 'vscode' ||\n    process.env.TERM_PROGRAM === 'iTerm.app' ||\n    process.env.TERM_PROGRAM === 'Hyper' ||\n    process.env.WT_SESSION || // Windows Terminal\n    process.env.ConEmuPID\n  );\n}\n\n/**\n * æ£€æµ‹è¡¨æƒ…ç¬¦å·æ”¯æŒ | Detect emoji support\n */\nfunction detectEmoji(enableEmoji: AutoDetectOption): boolean {\n  if (typeof enableEmoji === 'boolean') {\n    return enableEmoji;\n  }\n\n  // è‡ªåŠ¨æ£€æµ‹è¡¨æƒ…ç¬¦å·æ”¯æŒ | Auto-detect emoji support\n  // Windowså¹³å°é€šå¸¸éœ€è¦ç‰¹æ®Šå¤„ç† | Windows platform usually needs special handling\n  return !!(\n    process.platform !== 'win32' ||\n    process.env.WT_SESSION ||\n    process.env.TERM_PROGRAM === 'vscode' ||\n    process.env.ConEmuPID ||\n    process.env.TERM_PROGRAM === 'Hyper'\n  );\n}\n\n/**\n * æ£€æŸ¥æ˜¯å¦ä¸ºå·²çŸ¥æ”¯æŒNerd Fontçš„ç»ˆç«¯ | Check if it's a known Nerd Font compatible terminal\n */\nfunction isNerdFontCompatibleTerminal(): boolean {\n  const termProgram = process.env.TERM_PROGRAM;\n  const term = process.env.TERM;\n\n  // å·²çŸ¥æ”¯æŒNerd Fontçš„ç»ˆç«¯ç¨‹åº | Terminal programs known to support Nerd Font\n  const supportedTerminals = ['iTerm.app', 'WezTerm', 'Alacritty', 'kitty', 'Hyper'];\n\n  if (termProgram && supportedTerminals.includes(termProgram)) {\n    return true;\n  }\n\n  // æ£€æŸ¥terminalç±»å‹ | Check terminal type\n  if (term === 'xterm-kitty' || term === 'alacritty') {\n    return true;\n  }\n\n  return false;\n}\n\n/**\n * æ£€æŸ¥æ˜¯å¦ä¸ºNerd Fontåç§° | Check if it's a Nerd Font name\n */\nfunction isNerdFontName(fontName: string): boolean {\n  const nerdFontIndicators = [\n    'nerd',\n    'nf-',\n    'powerline',\n    'fira code',\n    'jetbrains mono',\n    'hack',\n    'source code pro',\n    'ubuntu mono',\n    'cascadia code',\n    'dejavu sans mono',\n  ];\n\n  const lowerFontName = fontName.toLowerCase();\n  return nerdFontIndicators.some((indicator) => lowerFontName.includes(indicator));\n}\n\n/**\n * é€šè¿‡å­—ä½“åç§°æ£€æµ‹Nerd Font | Detect Nerd Font by font name\n */\nfunction detectNerdFontByName(): boolean {\n  // æ£€æŸ¥å¸¸è§çš„Nerd Fontç¯å¢ƒå˜é‡ | Check common Nerd Font environment variables\n  const fontVars = [process.env.FONT, process.env.TERMINAL_FONT, process.env.NERD_FONT_NAME];\n\n  for (const fontVar of fontVars) {\n    if (fontVar && isNerdFontName(fontVar)) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\n/**\n * ä¿å®ˆçš„Nerd Fontæ£€æµ‹ | Conservative Nerd Font detection\n */\nfunction conservativeNerdFontDetection(): boolean {\n  // å¯¹äºVS Codeï¼Œæ£€æŸ¥æ›´å¤šç»†èŠ‚ | For VS Code, check more details\n  if (process.env.TERM_PROGRAM === 'vscode') {\n    // VS Codeç»ˆç«¯é€šå¸¸æ”¯æŒNerd Fontï¼Œä½†éœ€è¦ç”¨æˆ·é…ç½® | VS Code terminal usually supports Nerd Font, but requires user configuration\n    // ä¿å®ˆèµ·è§ï¼Œé™¤éæ˜ç¡®é…ç½®ï¼Œå¦åˆ™è¿”å›false | Conservatively, return false unless explicitly configured\n    return false;\n  }\n\n  // Windows Terminal é€šå¸¸æ”¯æŒ | Windows Terminal usually supports\n  if (process.env.WT_SESSION) {\n    return true;\n  }\n\n  // å¯¹äºå…¶ä»–æƒ…å†µï¼Œä¿å®ˆè¿”å›falseé¿å…æ˜¾ç¤ºä¹±ç  | For other cases, conservatively return false to avoid garbled characters\n  return false;\n}\n\n/**\n * æ£€æµ‹Nerd Fontæ”¯æŒ | Detect Nerd Font support\n */\nfunction detectNerdFont(enableNerdFont: AutoDetectOption, forceNerdFont: boolean): boolean {\n  if (forceNerdFont) {\n    return true;\n  }\n\n  if (typeof enableNerdFont === 'boolean') {\n    return enableNerdFont;\n  }\n\n  // 1. ä¼˜å…ˆæ£€æŸ¥ç¯å¢ƒå˜é‡ - æœ€å¯é çš„æ–¹æ³• | Priority: check environment variables - most reliable\n  if (process.env.NERD_FONT === '1' || process.env.NERD_FONT === 'true') {\n    return true;\n  }\n\n  // 2. æ£€æŸ¥å·²çŸ¥æ”¯æŒNerd Fontçš„ç»ˆç«¯ | Check terminals known to support Nerd Font\n  if (isNerdFontCompatibleTerminal()) {\n    return true;\n  }\n\n  // 3. å­—ä½“åç§°æ£€æµ‹ | Font name detection\n  if (detectNerdFontByName()) {\n    return true;\n  }\n\n  // 4. åŸºäºç»ˆç«¯ç‰¹å¾çš„ä¿å®ˆæ£€æµ‹ | Conservative detection based on terminal features\n  return conservativeNerdFontDetection();\n}\n\n/**\n * æ£€æµ‹ç»ˆç«¯èƒ½åŠ› | Detect terminal capabilities\n */\nexport function detect(\n  enableColors: AutoDetectOption = 'auto',\n  enableEmoji: AutoDetectOption = 'auto',\n  enableNerdFont: AutoDetectOption = 'auto',\n  forceNerdFont: boolean = false\n): TerminalCapabilities {\n  return {\n    colors: detectColors(enableColors),\n    emoji: detectEmoji(enableEmoji),\n    nerdFont: detectNerdFont(enableNerdFont, forceNerdFont),\n  };\n}\n\n/**\n * è·å–èƒ½åŠ›è¯¦ç»†ä¿¡æ¯ç”¨äºè°ƒè¯• | Get capability details for debugging\n */\nexport function getCapabilityInfo(): Record<string, unknown> {\n  return {\n    platform: process.platform,\n    env: {\n      COLORTERM: process.env.COLORTERM,\n      TERM: process.env.TERM,\n      TERM_PROGRAM: process.env.TERM_PROGRAM,\n      TERM_PROGRAM_VERSION: process.env.TERM_PROGRAM_VERSION,\n      WT_SESSION: process.env.WT_SESSION,\n      ConEmuPID: process.env.ConEmuPID,\n      NERD_FONT: process.env.NERD_FONT,\n      FONT: process.env.FONT,\n    },\n    detected: detect(),\n  };\n}\n\n/**\n * @deprecated Legacy class - use individual functions instead\n * å‘åå…¼å®¹æ€§çš„é—ç•™ç±» - è¯·ä½¿ç”¨ç‹¬ç«‹å‡½æ•°\n */\n// Note: This class has been removed to improve code quality.\n// Use the exported functions directly instead.\n\n/**\n * åˆ«åå’Œä¾¿æ·åŒ…è£…ç±»: ä¸ºå‘åå…¼å®¹å’Œç®€åŒ–ä½¿ç”¨\n */\nexport class TerminalDetector {\n  detectCapabilities(): TerminalCapabilities {\n    return detect();\n  }\n\n  getCapabilityInfo(): Record<string, unknown> {\n    return getCapabilityInfo();\n  }\n}\n","import { ComponentRegistry } from '../components/base.js';\nimport { BranchComponentFactory } from '../components/branch.js';\nimport { ModelComponentFactory } from '../components/model.js';\nimport { ProjectComponentFactory } from '../components/project.js';\nimport { StatusComponentFactory } from '../components/status.js';\nimport { TokensComponentFactory } from '../components/tokens.js';\nimport type { ComponentConfig, Config, InputData, RenderContext } from '../config/schema.js';\nimport { TerminalRenderer } from '../terminal/colors.js';\nimport { detect, getCapabilityInfo } from '../terminal/detector.js';\n\n/**\n * ç”Ÿæˆå™¨é€‰é¡¹ | Generator options\n */\nexport interface GeneratorOptions {\n  preset?: string;\n  updateThrottling?: boolean;\n  disableCache?: boolean;\n}\n\n/**\n * æ ¸å¿ƒçŠ¶æ€è¡Œç”Ÿæˆå™¨ | Core statusline generator\n * æ•´åˆæ‰€æœ‰ç»„ä»¶ï¼Œç”Ÿæˆæœ€ç»ˆçš„çŠ¶æ€è¡Œ | Integrates all components to generate the final statusline\n */\nexport class StatuslineGenerator {\n  private config: Config;\n  private componentRegistry: ComponentRegistry;\n  private renderer?: TerminalRenderer;\n  private lastUpdate: number = 0;\n  private lastResult: string | null = null;\n  private updateInterval: number = 300; // å®˜æ–¹å»ºè®®çš„300msæ›´æ–°é—´éš” | Official 300ms update interval\n  private disableCache: boolean = false;\n\n  constructor(config: Config, options: GeneratorOptions = {}) {\n    this.config = config;\n    this.componentRegistry = new ComponentRegistry();\n    this.initializeComponents();\n\n    if (options.updateThrottling !== false) {\n      this.updateInterval = 300;\n    }\n\n    this.disableCache = options.disableCache || false;\n  }\n\n  /**\n   * åˆå§‹åŒ–ç»„ä»¶æ³¨å†Œè¡¨ | Initialize component registry\n   */\n  private initializeComponents(): void {\n    // æ³¨å†Œæ‰€æœ‰ç»„ä»¶å·¥å‚ | Register all component factories\n    this.componentRegistry.register('project', new ProjectComponentFactory());\n    this.componentRegistry.register('model', new ModelComponentFactory());\n    this.componentRegistry.register('branch', new BranchComponentFactory());\n    this.componentRegistry.register('tokens', new TokensComponentFactory());\n    this.componentRegistry.register('status', new StatusComponentFactory());\n  }\n\n  /**\n   * ç”ŸæˆçŠ¶æ€è¡Œ | Generate statusline\n   */\n  public async generate(inputData: InputData): Promise<string> {\n    try {\n      // æ£€æŸ¥æ›´æ–°é¢‘ç‡é™åˆ¶ | Check update rate limit\n      if (!this.shouldUpdate()) {\n        return this.lastResult || '';\n      }\n\n      // æ£€æµ‹ç»ˆç«¯èƒ½åŠ› | Detect terminal capabilities\n      const capabilities = detect(\n        this.config.style?.enable_colors,\n        this.config.style?.enable_emoji,\n        this.config.style?.enable_nerd_font,\n        this.config.experimental?.force_nerd_font\n      );\n\n      // åˆå§‹åŒ–ç»ˆç«¯æ¸²æŸ“å™¨ | Initialize terminal renderer\n      this.renderer = new TerminalRenderer(capabilities, this.config);\n\n      // åˆ›å»ºæ¸²æŸ“ä¸Šä¸‹æ–‡ | Create render context\n      const context: RenderContext = {\n        inputData,\n        config: this.config,\n        capabilities,\n        colors: this.renderer.getColors(),\n        icons: this.renderer.getIcons(),\n      };\n\n      // è·å–ç»„ä»¶é¡ºåº | Get component order\n      const componentOrder = this.getComponentOrder();\n\n      // ç”Ÿæˆå„ç»„ä»¶å†…å®¹ | Generate component content\n      const componentResults: string[] = [];\n\n      for (const componentName of componentOrder) {\n        const componentConfig = this.getComponentConfig(componentName);\n        if (!componentConfig || !componentConfig.enabled) {\n          continue;\n        }\n\n        const component = this.componentRegistry.create(\n          componentName,\n          componentName,\n          componentConfig as ComponentConfig\n        );\n\n        if (component) {\n          try {\n            const result = await component.render(context);\n            if (result.success && result.content) {\n              componentResults.push(result.content);\n            } else if (!result.success && result.error) {\n              console.error(`Component ${componentName} failed:`, result.error);\n            }\n          } catch (error) {\n            console.error(`Error rendering component ${componentName}:`, error);\n          }\n        }\n      }\n\n      // åˆå¹¶ç»„ä»¶ç»“æœ | Combine component results\n      const separator = this.config.style?.separator || ' ';\n      const result = componentResults.join(separator);\n\n      // ç¼“å­˜ç»“æœ | Cache result\n      this.lastResult = result;\n\n      return result;\n    } catch (error) {\n      console.error('Error generating statusline:', error);\n      // è¿”å›ç®€åŒ–çš„é”™è¯¯çŠ¶æ€ | Return simplified error status\n      return this.generateFallbackStatus(inputData);\n    }\n  }\n\n  /**\n   * è·å–ç»„ä»¶é¡ºåº | Get component order\n   */\n  private getComponentOrder(): string[] {\n    const components = this.config.components;\n\n    // å¦‚æœé…ç½®äº†ç»„ä»¶é¡ºåºï¼Œä½¿ç”¨é…ç½®çš„é¡ºåº | If component order is configured, use configured order\n    if (components?.order && Array.isArray(components.order)) {\n      return components.order;\n    }\n\n    // ä½¿ç”¨é¢„è®¾ç³»ç»Ÿè§£æç»„ä»¶é¡ºåº | Use preset system to parse component order\n    const preset = this.config.preset || 'PMBTS';\n    return this.parsePreset(preset);\n  }\n\n  /**\n   * è§£æé¢„è®¾å­—ç¬¦ä¸² | Parse preset string\n   */\n  private parsePreset(preset: string): string[] {\n    const mapping = this.config.preset_mapping || {\n      P: 'project',\n      M: 'model',\n      B: 'branch',\n      T: 'tokens',\n      S: 'status',\n    };\n\n    return preset\n      .split('')\n      .map((char) => mapping[char as keyof typeof mapping])\n      .filter(Boolean);\n  }\n\n  /**\n   * è·å–ç»„ä»¶é…ç½® | Get component configuration\n   */\n  private getComponentConfig(componentName: string): Record<string, unknown> | null {\n    const components = this.config.components;\n    if (!components) return null;\n\n    return (components as Record<string, unknown>)[componentName] as Record<string, unknown> | null;\n  }\n\n  /**\n   * æ£€æŸ¥æ˜¯å¦åº”è¯¥æ›´æ–° | Check if should update\n   */\n  private shouldUpdate(): boolean {\n    // å¦‚æœç¦ç”¨ç¼“å­˜ï¼Œæ€»æ˜¯å…è®¸æ›´æ–° | Always allow update if cache is disabled\n    if (this.disableCache) {\n      return true;\n    }\n\n    const now = Date.now();\n    if (now - this.lastUpdate < this.updateInterval) {\n      return false;\n    }\n    this.lastUpdate = now;\n    return true;\n  }\n\n  /**\n   * ç”Ÿæˆåå¤‡çŠ¶æ€ | Generate fallback status\n   */\n  private generateFallbackStatus(inputData: InputData): string {\n    try {\n      // åŸºæœ¬çš„æ— é¢œè‰²çŠ¶æ€è¡Œ | Basic colorless statusline\n      const parts: string[] = [];\n\n      // é¡¹ç›®å | Project name\n      if (inputData.workspace?.project_dir) {\n        const projectName = inputData.workspace.project_dir.split('/').pop();\n        if (projectName) {\n          parts.push(`[P] ${projectName}`);\n        }\n      }\n\n      // æ¨¡å‹ | Model\n      if (inputData.model?.id) {\n        const modelName = inputData.model.id.includes('sonnet') ? 'S4' : 'M';\n        parts.push(`[M] ${modelName}`);\n      }\n\n      // çŠ¶æ€ | Status\n      parts.push('[S] Ready');\n\n      return parts.join(' ');\n    } catch (_error) {\n      return '[ERR] Statusline Error';\n    }\n  }\n\n  /**\n   * æ›´æ–°é…ç½® | Update configuration\n   */\n  public updateConfig(newConfig: Config): void {\n    this.config = newConfig;\n    // æ¸…é™¤ç¼“å­˜ | Clear cache\n    this.lastResult = null;\n    this.lastUpdate = 0;\n  }\n\n  /**\n   * è·å–å½“å‰é…ç½® | Get current configuration\n   */\n  public getConfig(): Config {\n    return { ...this.config };\n  }\n\n  /**\n   * è·å–ç»ˆç«¯èƒ½åŠ›ä¿¡æ¯ | Get terminal capability info\n   */\n  public getTerminalCapabilities() {\n    return getCapabilityInfo();\n  }\n\n  /**\n   * å¼ºåˆ¶åˆ·æ–° | Force refresh\n   */\n  public forceRefresh(): void {\n    this.lastUpdate = 0;\n    this.lastResult = null;\n  }\n}\n","/**\n * Claude Code Statusline Pro - å…¬å…±APIå¯¼å‡º\n * Enhanced statusline for Claude Code with TypeScript, live preview, and interactive configuration\n *\n * @version 2.0.0-beta.1\n * @author wangnov\n * @license MIT\n */\n\nexport { ConfigEditor, createConfigEditor } from './cli/config-editor.js';\n// CLI å·¥å…·å¯¼å‡º (ä¾›é«˜çº§ç”¨æˆ·ä½¿ç”¨)\nexport {\n  CliMessageIconManager,\n  formatCliMessage,\n  getCliIcon,\n  getCliIconManager,\n} from './cli/message-icons.js';\nexport { MockDataGenerator, mockDataGenerator } from './cli/mock-data.js';\nexport { createLivePreviewEngine, LivePreviewEngine } from './cli/preview-engine.js';\n// ç»„ä»¶ç³»ç»Ÿå¯¼å‡º\nexport { Component, ComponentFactory, ComponentRegistry } from './components/base.js';\nexport { BranchComponent } from './components/branch.js';\nexport { ModelComponent } from './components/model.js';\nexport { ProjectComponent } from './components/project.js';\nexport { StatusComponent } from './components/status.js';\nexport { TokensComponent } from './components/tokens.js';\n// é…ç½®ç³»ç»Ÿå¯¼å‡º\nexport { ConfigLoader } from './config/loader.js';\n\n// ç±»å‹å®šä¹‰å¯¼å‡º\nimport type { InputData } from './config/schema.js';\n\nexport type {\n  ComponentConfig,\n  ComponentMetadata,\n  // ç»„ä»¶ç›¸å…³ç±»å‹\n  ComponentOptions,\n  // é…ç½®ç›¸å…³ç±»å‹\n  Config,\n  ConfigEditorOptions,\n  InputData,\n  // CLIç›¸å…³ç±»å‹\n  LivePreviewOptions,\n  MockScenario,\n  RenderContext,\n  RenderOptions,\n  StyleConfig,\n  ThemeConfig,\n} from './config/schema.js';\nexport * from './config/schema.js';\n// æ ¸å¿ƒåŠŸèƒ½å¯¼å‡º\nexport { StatuslineGenerator } from './core/generator.js';\nexport {\n  getDebugInfo,\n  mergeInputData,\n  parseArguments,\n  parseInput,\n  parseJson,\n  validate,\n} from './core/parser.js';\nexport { ColorSystem, IconSystem } from './terminal/colors.js';\n// ç»ˆç«¯ç³»ç»Ÿå¯¼å‡º\nexport { TerminalDetector } from './terminal/detector.js';\n\n// å·¥å…·å‡½æ•°å¯¼å‡º\nexport * from './utils/index.js';\n\n/**\n * ç‰ˆæœ¬ä¿¡æ¯\n */\nexport const VERSION = '2.0.0-beta.1';\n\n/**\n * é»˜è®¤å¯¼å‡º - ä¸»è¦çš„StatuslineGeneratorç±»\n */\nexport { StatuslineGenerator as default } from './core/generator.js';\n\n/**\n * å¿«æ·å·¥å‚å‡½æ•° - åˆ›å»ºstatuslineç”Ÿæˆå™¨å®ä¾‹\n */\nexport async function createStatuslineGenerator(configPath?: string) {\n  const { ConfigLoader } = await import('./config/loader.js');\n  const { StatuslineGenerator } = await import('./core/generator.js');\n  const loader = new ConfigLoader();\n  const config = await loader.load(configPath);\n  return new StatuslineGenerator(config);\n}\n\n/**\n * å¿«æ·å‡½æ•° - ç›´æ¥ç”Ÿæˆstatusline\n */\nexport async function generateStatusline(\n  inputData: InputData,\n  configPath?: string\n): Promise<string> {\n  const generator = await createStatuslineGenerator(configPath);\n  return generator.generate(inputData);\n}\n\n/**\n * ç±»å‹ä¿æŠ¤å‡½æ•° - æ£€æŸ¥æ˜¯å¦ä¸ºæœ‰æ•ˆçš„InputData\n */\nexport function isValidInputData(data: unknown): data is InputData {\n  return (\n    data !== null &&\n    typeof data === 'object' &&\n    'model' in data &&\n    typeof (data as Record<string, unknown>).model === 'object'\n  );\n}\n\n/**\n * å·¥å…·å‡½æ•° - è·å–é»˜è®¤é…ç½®\n */\nexport async function getDefaultConfig(): Promise<Record<string, unknown>> {\n  const { ConfigLoader } = await import('./config/loader.js');\n  const loader = new ConfigLoader();\n  return loader.getDefaultConfig();\n}\n\n/**\n * å·¥å…·å‡½æ•° - éªŒè¯é…ç½®\n */\nexport async function validateConfig(_config: unknown): Promise<boolean> {\n  try {\n    const { ConfigLoader } = await import('./config/loader.js');\n    const loader = new ConfigLoader();\n    const result = await loader.validateConfig();\n    return result.valid;\n  } catch {\n    return false;\n  }\n}\n","/**\n * äº¤äº’å¼é…ç½®ç¼–è¾‘å™¨ - Interactive Configuration Editor\n * æ ¸å¿ƒåŠŸèƒ½: å…¨å±ç»ˆç«¯ç•Œé¢ã€å®æ—¶é¢„è§ˆé›†æˆã€é”®ç›˜å¯¼èˆª\n *\n * ç‰¹æ€§:\n * - Inquirer.js é©±åŠ¨çš„äº¤äº’å¼ç•Œé¢\n * - å®æ—¶é¢„è§ˆé…ç½®å˜æ›´æ•ˆæœ\n * - é”®ç›˜å¯¼èˆªå’Œå¿«æ·é”®æ”¯æŒ\n * - é…ç½®é¡¹éªŒè¯å’Œé”™è¯¯æç¤º\n * - å¤šå±‚çº§é…ç½®ç®¡ç† (ç»„ä»¶/æ ·å¼/ä¸»é¢˜)\n */\n\nimport { checkbox, confirm, input, select } from '@inquirer/prompts';\nimport { ConfigLoader } from '../config/loader.js';\nimport type { ComponentConfig, Config } from '../config/schema.js';\nimport { StatuslineGenerator } from '../core/generator.js';\nimport { TerminalDetector } from '../terminal/detector.js';\nimport { MockDataGenerator } from './mock-data.js';\nimport { LivePreviewEngine } from './preview-engine.js';\n\n/**\n * é…ç½®ç¼–è¾‘å™¨é€‰é¡¹\n */\nexport interface ConfigEditorOptions {\n  /** é…ç½®æ–‡ä»¶è·¯å¾„ */\n  configPath?: string;\n  /** æ˜¯å¦å¯ç”¨å®æ—¶é¢„è§ˆ */\n  enableLivePreview?: boolean;\n  /** æ˜¯å¦è‡ªåŠ¨ä¿å­˜ */\n  autoSave?: boolean;\n}\n\n/**\n * é…ç½®èœå•é¡¹æ¥å£\n */\n// interface ConfigMenuItem {\n//   name: string;\n//   value: string;\n//   description?: string;\n//   section?: string;\n// }\n\n/**\n * äº¤äº’å¼é…ç½®ç¼–è¾‘å™¨ç±»\n */\nexport class ConfigEditor {\n  private configLoader: ConfigLoader;\n  private previewEngine: LivePreviewEngine | null = null;\n  private terminalDetector: TerminalDetector;\n  private currentConfig!: Config;\n  private options: Required<ConfigEditorOptions>;\n  private hasUnsavedChanges = false;\n\n  constructor(options: ConfigEditorOptions = {}) {\n    this.options = {\n      configPath: options.configPath || '',\n      enableLivePreview: options.enableLivePreview ?? true,\n      autoSave: options.autoSave ?? false,\n    };\n\n    if (options.configPath) {\n      this.options.configPath = options.configPath;\n    }\n\n    this.configLoader = new ConfigLoader();\n    this.terminalDetector = new TerminalDetector();\n\n    if (this.options.enableLivePreview) {\n      this.previewEngine = new LivePreviewEngine({\n        configPath: this.options.configPath,\n        refreshInterval: 100, // å¿«é€Ÿå“åº”é…ç½®å˜æ›´\n      });\n    }\n  }\n\n  /**\n   * å¯åŠ¨äº¤äº’å¼é…ç½®æ¨¡å¼\n   */\n  async startInteractiveMode(): Promise<void> {\n    try {\n      // åˆå§‹åŒ–é…ç½®\n      await this.loadConfiguration();\n\n      // æ£€æŸ¥ç»ˆç«¯å…¼å®¹æ€§\n      this.checkTerminalCompatibility();\n\n      // åˆå§‹åŒ–é¢„è§ˆå¼•æ“\n      if (this.previewEngine) {\n        await this.previewEngine.initialize();\n      }\n\n      // è¿›å…¥ä¸»é…ç½®å¾ªç¯ï¼ˆåŒ…å«å®æ—¶é¢„è§ˆï¼‰\n      await this.runConfigurationLoop();\n    } catch (error) {\n      console.error('Configuration editor error:', error);\n      throw error;\n    } finally {\n      // æ¸…ç†èµ„æº\n      if (this.previewEngine) {\n        this.previewEngine.stopLivePreview();\n      }\n    }\n  }\n\n  /**\n   * åŠ è½½é…ç½®\n   */\n  private async loadConfiguration(): Promise<void> {\n    try {\n      this.currentConfig = await this.configLoader.load(this.options.configPath);\n    } catch (error) {\n      console.error('Failed to load configuration:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * æ£€æŸ¥ç»ˆç«¯å…¼å®¹æ€§\n   */\n  private checkTerminalCompatibility(): void {\n    const capabilities = this.terminalDetector.detectCapabilities();\n\n    if (!process.stdin.isTTY) {\n      throw new Error('äº¤äº’æ¨¡å¼éœ€è¦TTYç»ˆç«¯');\n    }\n\n    console.log('ğŸ–¥ï¸  ç»ˆç«¯èƒ½åŠ›æ£€æµ‹:');\n    console.log(`   é¢œè‰²æ”¯æŒ: ${capabilities.colors ? 'âœ…' : 'âŒ'}`);\n    console.log(`   è¡¨æƒ…ç¬¦å·: ${capabilities.emoji ? 'âœ…' : 'âŒ'}`);\n    console.log(`   Nerd Font: ${capabilities.nerdFont ? 'âœ…' : 'âŒ'}`);\n    console.log();\n  }\n\n  /**\n   * æ¸²æŸ“å®æ—¶é¢„è§ˆç•Œé¢\n   */\n  private async renderLivePreviewInterface(): Promise<void> {\n    console.clear();\n\n    // æ˜¾ç¤ºæ ‡é¢˜\n    const capabilities = this.terminalDetector.detectCapabilities();\n    const title = capabilities.colors\n      ? '\\x1b[1;36mClaude Code Statusline Pro v2.0.0\\x1b[0m'\n      : 'Claude Code Statusline Pro v2.0.0';\n    const subtitle = capabilities.colors\n      ? '\\x1b[36mğŸ›ï¸  äº¤äº’å¼é…ç½®ç¼–è¾‘å™¨ - Interactive Configuration Editor\\x1b[0m'\n      : 'ğŸ›ï¸  äº¤äº’å¼é…ç½®ç¼–è¾‘å™¨ - Interactive Configuration Editor';\n\n    console.log(title);\n    console.log(subtitle);\n\n    // æ˜¾ç¤ºå®æ—¶é¢„è§ˆåŒºåŸŸ\n    console.log();\n    const previewTitle = capabilities.colors\n      ? '\\x1b[32mâœ… å®æ—¶é¢„è§ˆ - Live Preview (é…ç½®å˜åŒ–æ—¶è‡ªåŠ¨æ›´æ–°)\\x1b[0m'\n      : 'âœ… å®æ—¶é¢„è§ˆ - Live Preview (é…ç½®å˜åŒ–æ—¶è‡ªåŠ¨æ›´æ–°)';\n    console.log(previewTitle);\n    console.log();\n\n    // æ¸²æŸ“é¢„è§ˆåœºæ™¯\n    const scenarios = ['dev', 'critical', 'error'];\n\n    for (const scenarioId of scenarios) {\n      try {\n        const mockGenerator = new MockDataGenerator();\n        const mockData = mockGenerator.generate(scenarioId);\n        const scenario = mockGenerator.getScenario(scenarioId);\n\n        // ç”Ÿæˆstatusline\n        const generator = new StatuslineGenerator(this.currentConfig, { disableCache: true });\n        const output = await generator.generate(mockData);\n\n        // æ˜¾ç¤ºåœºæ™¯ä¿¡æ¯å’Œç»“æœ\n        const scenarioName = scenario?.name || scenarioId;\n        const _description = scenario?.description || '';\n\n        // ç´§å‡‘çš„æ˜¾ç¤ºæ ¼å¼\n        const scenarioLabel = capabilities.colors\n          ? `\\x1b[90måœºæ™¯: ${scenarioName}\\x1b[0m`\n          : `åœºæ™¯: ${scenarioName}`;\n\n        console.log(`${scenarioLabel}`);\n        console.log(output);\n        console.log();\n      } catch (error) {\n        const errorLabel = capabilities.colors\n          ? `\\x1b[31måœºæ™¯: ${scenarioId} - é”™è¯¯\\x1b[0m`\n          : `åœºæ™¯: ${scenarioId} - é”™è¯¯`;\n\n        console.log(errorLabel);\n        console.log(`âŒ æ¸²æŸ“å¤±è´¥: ${error instanceof Error ? error.message : String(error)}`);\n        console.log();\n      }\n    }\n\n    // åˆ†éš”çº¿\n    const separator = capabilities.colors ? `\\x1b[90m${'â”€'.repeat(70)}\\x1b[0m` : 'â”€'.repeat(70);\n    console.log(separator);\n  }\n\n  /**\n   * è¿è¡Œä¸»é…ç½®å¾ªç¯\n   */\n  private async runConfigurationLoop(): Promise<void> {\n    let continueEditing = true;\n\n    while (continueEditing) {\n      try {\n        // æ¸…å±å¹¶æ˜¾ç¤ºå®æ—¶é¢„è§ˆ\n        await this.renderLivePreviewInterface();\n\n        const action = await this.showMainMenu();\n\n        switch (action) {\n          case 'components':\n            await this.configureComponents();\n            break;\n          case 'themes':\n            await this.configureThemes();\n            break;\n          case 'styles':\n            await this.configureStyles();\n            break;\n          case 'presets':\n            await this.configurePresets();\n            break;\n          case 'reset':\n            await this.resetConfiguration();\n            break;\n          case 'save':\n            await this.saveConfiguration();\n            break;\n          case 'exit':\n            continueEditing = await this.handleExit();\n            break;\n          default:\n            console.log('Unknown action:', action);\n        }\n      } catch (error) {\n        if (error instanceof Error && error.name === 'ExitPromptError') {\n          continueEditing = await this.handleExit();\n        } else {\n          console.error('Configuration error:', error);\n          await this.waitForKeyPress();\n        }\n      }\n    }\n  }\n\n  /**\n   * æ˜¾ç¤ºä¸»èœå•\n   */\n  private async showMainMenu(): Promise<string> {\n    const unsavedIndicator = this.hasUnsavedChanges ? ' (*)' : '';\n\n    return await select({\n      message: `é…ç½®èœå•${unsavedIndicator}`,\n      choices: [\n        {\n          name: 'ğŸ§© ç»„ä»¶é…ç½® - é…ç½®æ˜¾ç¤ºç»„ä»¶',\n          value: 'components',\n          description: 'å¯ç”¨/ç¦ç”¨å’Œé…ç½®å„ä¸ªçŠ¶æ€è¡Œç»„ä»¶',\n        },\n        {\n          name: 'ğŸ¨ ä¸»é¢˜ç®¡ç† - ä¸»é¢˜ç®¡ç†',\n          value: 'themes',\n          description: 'é€‰æ‹©å’Œè‡ªå®šä¹‰è§†è§‰ä¸»é¢˜',\n        },\n        {\n          name: 'ğŸ’„ æ ·å¼è®¾ç½® - æ ·å¼è®¾ç½®',\n          value: 'styles',\n          description: 'é…ç½®é¢œè‰²ã€å›¾æ ‡å’Œè§†è§‰å…ƒç´ ',\n        },\n        {\n          name: 'ğŸ“‹ ç»„ä»¶é¢„è®¾ - ç»„ä»¶é¢„è®¾',\n          value: 'presets',\n          description: 'ç®¡ç†ç»„ä»¶é¡ºåºå’Œé¢„è®¾é…ç½®',\n        },\n        {\n          name: 'ğŸ”„ é‡ç½®é…ç½® - é‡ç½®ä¸ºé»˜è®¤',\n          value: 'reset',\n          description: 'å°†é…ç½®é‡ç½®ä¸ºå‡ºå‚é»˜è®¤å€¼',\n        },\n        {\n          name: 'ğŸ’¾ ä¿å­˜é…ç½® - ä¿å­˜é…ç½®',\n          value: 'save',\n          description: 'ä¿å­˜å½“å‰é…ç½®åˆ°æ–‡ä»¶',\n        },\n        {\n          name: 'ğŸšª é€€å‡ºç¼–è¾‘å™¨ - é€€å‡ºç¼–è¾‘å™¨',\n          value: 'exit',\n          description: 'é€€å‡ºé…ç½®ç¼–è¾‘å™¨',\n        },\n      ],\n      pageSize: 10,\n    });\n  }\n\n  /**\n   * é…ç½®ç»„ä»¶\n   */\n  private async configureComponents(): Promise<void> {\n    const componentName = await select({\n      message: 'é€‰æ‹©è¦é…ç½®çš„ç»„ä»¶ï¼š',\n      choices: [\n        { name: 'ğŸ“ é¡¹ç›®åç§° - é¡¹ç›®åç§°æ˜¾ç¤º', value: 'project' },\n        { name: 'ğŸ¤– AIæ¨¡å‹ - AIæ¨¡å‹ä¿¡æ¯', value: 'model' },\n        { name: 'ğŸŒ¿ Gitåˆ†æ”¯ - Gitåˆ†æ”¯æ˜¾ç¤º', value: 'branch' },\n        { name: 'ğŸ“Š Tokenä½¿ç”¨ - Tokenä½¿ç”¨ç‡å’Œè¿›åº¦', value: 'tokens' },\n        { name: 'âš¡ ä¼šè¯çŠ¶æ€ - ä¼šè¯çŠ¶æ€æŒ‡ç¤ºå™¨', value: 'status' },\n        { name: 'â† è¿”å›ä¸»èœå•', value: 'back' },\n      ],\n    });\n\n    if (componentName === 'back') return;\n\n    await this.configureIndividualComponent(componentName);\n  }\n\n  /**\n   * é…ç½®å•ä¸ªç»„ä»¶\n   */\n  private async configureIndividualComponent(componentName: string): Promise<void> {\n    const component = this.currentConfig.components?.[\n      componentName as keyof typeof this.currentConfig.components\n    ] as ComponentConfig;\n\n    if (!component) {\n      console.log(`ç»„ä»¶ ${componentName} æœªæ‰¾åˆ°`);\n      return;\n    }\n\n    console.log(`\\\\nğŸ”§ é…ç½® ${componentName} ç»„ä»¶:`);\n\n    // å¯ç”¨/ç¦ç”¨ç»„ä»¶\n    const enabled = await confirm({\n      message: `å¯ç”¨ ${componentName} ç»„ä»¶ï¼Ÿ`,\n      default: component.enabled,\n    });\n\n    // é…ç½®å›¾æ ‡\n    let icon = component.icon;\n    if (enabled) {\n      icon = await input({\n        message: `${componentName} ç»„ä»¶å›¾æ ‡ï¼š`,\n        default: component.icon,\n      });\n    }\n\n    // é…ç½®é¢œè‰²\n    let color = component.color;\n    if (enabled) {\n      color = await select({\n        message: `${componentName} ç»„ä»¶é¢œè‰²ï¼š`,\n        choices: [\n          { name: 'é’è‰² (é»˜è®¤)', value: 'cyan' },\n          { name: 'ç»¿è‰²', value: 'green' },\n          { name: 'é»„è‰²', value: 'yellow' },\n          { name: 'è“è‰²', value: 'blue' },\n          { name: 'ç´«çº¢è‰²', value: 'magenta' },\n          { name: 'çº¢è‰²', value: 'red' },\n          { name: 'ç™½è‰²', value: 'white' },\n          { name: 'ç°è‰²', value: 'gray' },\n        ],\n        default: component.color || 'cyan',\n      });\n    }\n\n    // æ›´æ–°é…ç½®\n    const updatedComponent = {\n      ...component,\n      enabled,\n      icon,\n      color,\n    };\n\n    this.currentConfig.components = {\n      order: this.currentConfig.components?.order || [\n        'project',\n        'model',\n        'branch',\n        'tokens',\n        'status',\n      ],\n      ...this.currentConfig.components,\n      [componentName]: updatedComponent,\n    };\n\n    this.hasUnsavedChanges = true;\n\n    console.log(`âœ… ${componentName} ç»„ä»¶é…ç½®å·²æ›´æ–°ï¼`);\n    await this.waitForKeyPress();\n  }\n\n  /**\n   * é…ç½®ä¸»é¢˜\n   */\n  private async configureThemes(): Promise<void> {\n    const theme = await select({\n      message: 'é€‰æ‹©ä¸»é¢˜ï¼š',\n      choices: [\n        { name: 'ç®€æ´ä¸»é¢˜ - æ¸…çˆ½ç®€å•', value: 'minimal' },\n        { name: 'è¯¦ç»†ä¸»é¢˜ - è¯¦ç»†ä¿¡æ¯', value: 'verbose' },\n        { name: 'å¼€å‘è€…ä¸»é¢˜ - ä¾¿äºè°ƒè¯•', value: 'developer' },\n        { name: 'è‡ªå®šä¹‰ä¸»é¢˜ - å½“å‰é…ç½®', value: 'custom' },\n        { name: 'â† è¿”å›ä¸»èœå•', value: 'back' },\n      ],\n    });\n\n    if (theme === 'back') return;\n\n    if (theme !== 'custom') {\n      await this.configLoader.applyTheme(theme);\n      this.currentConfig = await this.configLoader.load();\n      this.hasUnsavedChanges = true;\n    }\n\n    console.log(`âœ… å·²åº”ç”¨ä¸»é¢˜: ${theme}`);\n    await this.waitForKeyPress();\n  }\n\n  /**\n   * é…ç½®æ ·å¼\n   */\n  private async configureStyles(): Promise<void> {\n    const style = this.currentConfig.style;\n\n    const enableColors = await confirm({\n      message: 'å¯ç”¨é¢œè‰²ï¼Ÿ',\n      default: style?.enable_colors === true,\n    });\n\n    const enableEmoji = await confirm({\n      message: 'å¯ç”¨è¡¨æƒ…ç¬¦å·ï¼Ÿ',\n      default: style?.enable_emoji === true,\n    });\n\n    const enableNerdFont = await confirm({\n      message: 'å¯ç”¨ Nerd Font å›¾æ ‡ï¼Ÿ',\n      default: style?.enable_nerd_font === true,\n    });\n\n    const separator = await input({\n      message: 'ç»„ä»¶åˆ†éš”ç¬¦ï¼š',\n      default: style?.separator || ' | ',\n    });\n\n    // æ›´æ–°é…ç½®\n    this.currentConfig.style = {\n      separator,\n      enable_colors: enableColors,\n      enable_emoji: enableEmoji,\n      enable_nerd_font: enableNerdFont,\n      compact_mode: style?.compact_mode || false,\n      max_width: style?.max_width || 0,\n    };\n\n    this.hasUnsavedChanges = true;\n\n    console.log('âœ… æ ·å¼è®¾ç½®å·²æ›´æ–°ï¼');\n    await this.waitForKeyPress();\n  }\n\n  /**\n   * é…ç½®é¢„è®¾\n   */\n  private async configurePresets(): Promise<void> {\n    const preset = await select({\n      message: 'é€‰æ‹©ç»„ä»¶é¢„è®¾ï¼š',\n      choices: [\n        { name: 'PMBTS - é¡¹ç›®ã€æ¨¡å‹ã€åˆ†æ”¯ã€Tokenã€çŠ¶æ€', value: 'PMBTS' },\n        { name: 'PMB - ä»…é¡¹ç›®ã€æ¨¡å‹ã€åˆ†æ”¯', value: 'PMB' },\n        { name: 'PMBT - é¡¹ç›®ã€æ¨¡å‹ã€åˆ†æ”¯ã€Token', value: 'PMBT' },\n        { name: 'MBT - æ¨¡å‹ã€åˆ†æ”¯ã€Token', value: 'MBT' },\n        { name: 'è‡ªå®šä¹‰ - æ‰‹åŠ¨é…ç½®', value: 'custom' },\n        { name: 'â† è¿”å›ä¸»èœå•', value: 'back' },\n      ],\n    });\n\n    if (preset === 'back') return;\n\n    if (preset === 'custom') {\n      // è‡ªå®šä¹‰ç»„ä»¶é€‰æ‹©\n      const selectedComponents = await checkbox({\n        message: 'é€‰æ‹©è¦æ˜¾ç¤ºçš„ç»„ä»¶ï¼š',\n        choices: [\n          { name: 'é¡¹ç›®åç§°', value: 'project' },\n          { name: 'AIæ¨¡å‹', value: 'model' },\n          { name: 'Gitåˆ†æ”¯', value: 'branch' },\n          { name: 'Tokenä½¿ç”¨', value: 'tokens' },\n          { name: 'ä¼šè¯çŠ¶æ€', value: 'status' },\n        ],\n      });\n\n      if (this.currentConfig.components) {\n        this.currentConfig.components.order = selectedComponents;\n      } else {\n        this.currentConfig.components = { order: selectedComponents };\n      }\n    } else {\n      this.currentConfig.preset = preset;\n    }\n\n    this.hasUnsavedChanges = true;\n\n    console.log(`âœ… å·²åº”ç”¨é¢„è®¾: ${preset}`);\n    await this.waitForKeyPress();\n  }\n\n  /**\n   * é‡ç½®é…ç½®\n   */\n  private async resetConfiguration(): Promise<void> {\n    const confirmReset = await confirm({\n      message: 'ç¡®å®šè¦å°†æ‰€æœ‰é…ç½®é‡ç½®ä¸ºé»˜è®¤å€¼å—ï¼Ÿæ­¤æ“ä½œæ— æ³•æ’¤é”€ã€‚',\n      default: false,\n    });\n\n    if (confirmReset) {\n      await this.configLoader.resetToDefaults(this.options.configPath);\n      this.currentConfig = await this.configLoader.load();\n      this.hasUnsavedChanges = false;\n\n      console.log('âœ… é…ç½®å·²é‡ç½®ä¸ºé»˜è®¤å€¼');\n    } else {\n      console.log('é‡ç½®å·²å–æ¶ˆ');\n    }\n\n    await this.waitForKeyPress();\n  }\n\n  /**\n   * ä¿å­˜é…ç½®\n   */\n  private async saveConfiguration(): Promise<void> {\n    try {\n      await this.configLoader.save(this.currentConfig, this.options.configPath);\n      this.hasUnsavedChanges = false;\n      console.log('âœ… é…ç½®ä¿å­˜æˆåŠŸ');\n    } catch (error) {\n      console.error('é…ç½®ä¿å­˜å¤±è´¥:', error);\n    }\n\n    await this.waitForKeyPress();\n  }\n\n  /**\n   * å¤„ç†é€€å‡º\n   */\n  private async handleExit(): Promise<boolean> {\n    if (this.hasUnsavedChanges) {\n      const action = await select({\n        message: 'æ‚¨æœ‰æœªä¿å­˜çš„æ›´æ”¹ã€‚æ‚¨å¸Œæœ›å¦‚ä½•å¤„ç†ï¼Ÿ',\n        choices: [\n          { name: 'ä¿å­˜å¹¶é€€å‡º', value: 'save' },\n          { name: 'ä¸ä¿å­˜ç›´æ¥é€€å‡º', value: 'discard' },\n          { name: 'å–æ¶ˆï¼ˆç»§ç»­ç¼–è¾‘ï¼‰', value: 'cancel' },\n        ],\n      });\n\n      switch (action) {\n        case 'save':\n          await this.saveConfiguration();\n          return false; // Exit\n        case 'discard':\n          return false; // Exit without saving\n        case 'cancel':\n          return true; // Continue editing\n      }\n    }\n\n    return false; // Exit\n  }\n\n  /**\n   * ç­‰å¾…æŒ‰é”®\n   */\n  private async waitForKeyPress(): Promise<void> {\n    console.log('\\næŒ‰ä»»æ„é”®ç»§ç»­...');\n    return new Promise<void>((resolve) => {\n      const stdin = process.stdin;\n\n      // è®¾ç½®stdinä¸ºåŸå§‹æ¨¡å¼\n      if (stdin.isTTY) {\n        stdin.setRawMode(true);\n        stdin.resume();\n        stdin.setEncoding('utf8');\n      }\n\n      const onData = (key: string) => {\n        // æ¸…ç†ç›‘å¬å™¨\n        stdin.removeListener('data', onData);\n\n        // æ¢å¤stdinæ¨¡å¼\n        if (stdin.isTTY) {\n          stdin.setRawMode(false);\n          stdin.pause();\n        }\n\n        // Ctrl+C å¤„ç†\n        if (key === '\\u0003') {\n          console.log('\\nğŸ‘‹ å·²é€€å‡ºé…ç½®ç¼–è¾‘å™¨');\n          process.exit(0);\n        }\n\n        resolve();\n      };\n\n      stdin.on('data', onData);\n    });\n  }\n}\n\n/**\n * å·¥å‚å‡½æ•° - åˆ›å»ºé…ç½®ç¼–è¾‘å™¨å®ä¾‹\n */\nexport function createConfigEditor(options?: ConfigEditorOptions): ConfigEditor {\n  return new ConfigEditor(options);\n}\n","/**\n * Mockæ•°æ®ç”Ÿæˆå™¨ - å®æ—¶é¢„è§ˆç³»ç»Ÿæ ¸å¿ƒ\n * ç”Ÿæˆå„ç§çŠ¶æ€å’Œä½¿ç”¨åœºæ™¯çš„æ¨¡æ‹Ÿæ•°æ®ï¼Œæ”¯æŒå¤šåœºæ™¯é¢„è§ˆå’Œæµ‹è¯•\n */\n\nimport type { InputData } from '../config/schema.js';\n\n/**\n * Mockåœºæ™¯æ¥å£å®šä¹‰\n */\nexport interface MockScenario {\n  /** åœºæ™¯æ ‡è¯†ç¬¦ */\n  id: string;\n  /** åœºæ™¯åç§° */\n  name: string;\n  /** åœºæ™¯æè¿° */\n  description: string;\n  /** è¾“å…¥æ•°æ® */\n  inputData: InputData;\n  /** Tokenä½¿ç”¨ç‡ (0-100) */\n  tokenUsage?: number;\n  /** é¢„æœŸçŠ¶æ€ */\n  expectedStatus?: 'ready' | 'thinking' | 'tool_use' | 'error' | 'complete';\n}\n\n/**\n * Mockæ•°æ®ç”Ÿæˆå™¨ç±»\n */\nexport class MockDataGenerator {\n  private scenarios: Map<string, MockScenario> = new Map();\n\n  constructor() {\n    this.initializeScenarios();\n  }\n\n  /**\n   * åˆå§‹åŒ–æ‰€æœ‰Mockåœºæ™¯\n   */\n  private initializeScenarios(): void {\n    // å¼€å‘åœºæ™¯ - æ­£å¸¸å¼€å‘çŠ¶æ€\n    this.scenarios.set('dev', {\n      id: 'dev',\n      name: 'å¼€å‘ä¸­',\n      description: 'æ­£å¸¸å¼€å‘é¡¹ç›®ï¼Œä½tokenä½¿ç”¨ç‡ï¼Œä¸€åˆ‡è¿è¡Œè‰¯å¥½',\n      inputData: {\n        hookEventName: 'Status',\n        sessionId: 'dev_session_123',\n        model: { id: 'claude-sonnet-4' },\n        workspace: {\n          current_dir: '/Users/developer/my-awesome-project',\n          project_dir: '/Users/developer/my-awesome-project',\n        },\n        transcriptPath: '/tmp/claude_transcript_dev.json',\n        cwd: '/Users/developer/my-awesome-project',\n        gitBranch: 'feature/user-auth',\n      },\n      tokenUsage: 25,\n      expectedStatus: 'ready',\n    });\n\n    // ä¸´ç•ŒçŠ¶æ€åœºæ™¯ - é«˜tokenä½¿ç”¨\n    this.scenarios.set('critical', {\n      id: 'critical',\n      name: 'ä¸´ç•ŒçŠ¶æ€',\n      description: 'Tokenä½¿ç”¨æ¥è¿‘ä¸Šé™ï¼Œéœ€è¦æ³¨æ„ä¸Šä¸‹æ–‡ç®¡ç†',\n      inputData: {\n        hookEventName: 'Status',\n        sessionId: 'critical_session_456',\n        model: { id: 'claude-opus-4.1' },\n        workspace: {\n          current_dir: '/Users/developer/enterprise-system',\n          project_dir: '/Users/developer/enterprise-system',\n        },\n        transcriptPath: '/tmp/claude_transcript_critical.json',\n        cwd: '/Users/developer/large-enterprise-system',\n        gitBranch: null,\n      },\n      tokenUsage: 92,\n      expectedStatus: 'ready',\n    });\n\n    // é”™è¯¯çŠ¶æ€åœºæ™¯ - APIé”™è¯¯\n    this.scenarios.set('error', {\n      id: 'error',\n      name: 'é”™è¯¯çŠ¶æ€',\n      description: 'APIè°ƒç”¨å¤±è´¥æˆ–å·¥å…·æ‰§è¡Œå‡ºé”™',\n      inputData: {\n        hookEventName: 'Status',\n        sessionId: 'error_session_789',\n        model: { id: 'claude-haiku-3.5' },\n        workspace: {\n          current_dir: '/Users/developer/error-prone-app',\n          project_dir: '/Users/developer/error-prone-app',\n        },\n        transcriptPath: '/tmp/claude_transcript_error.json',\n        cwd: '/Users/developer/error-prone-app',\n        gitBranch: 'bugfix/critical-error',\n      },\n      tokenUsage: 45,\n      expectedStatus: 'error',\n    });\n\n    // æ€è€ƒçŠ¶æ€åœºæ™¯ - AIæ­£åœ¨å¤„ç†å¤æ‚ä»»åŠ¡\n    this.scenarios.set('thinking', {\n      id: 'thinking',\n      name: 'æ€è€ƒä¸­',\n      description: 'AIæ­£åœ¨å¤„ç†å¤æ‚ä»»åŠ¡ï¼Œæ·±åº¦æ€è€ƒæ¨¡å¼',\n      inputData: {\n        hookEventName: 'Status',\n        sessionId: 'thinking_session_101',\n        model: { id: 'claude-opus-4.1' },\n        workspace: {\n          current_dir: '/Users/developer/ai-research-project',\n          project_dir: '/Users/developer/ai-research-project',\n        },\n        transcriptPath: '/tmp/claude_transcript_thinking.json',\n        cwd: '/Users/developer/ai-research-project',\n        gitBranch: null,\n      },\n      tokenUsage: 65,\n      expectedStatus: 'thinking',\n    });\n\n    // å·¥å…·ä½¿ç”¨åœºæ™¯ - æ­£åœ¨æ‰§è¡Œå·¥å…·è°ƒç”¨\n    this.scenarios.set('tool', {\n      id: 'tool',\n      name: 'å·¥å…·æ‰§è¡Œ',\n      description: 'æ­£åœ¨æ‰§è¡Œå·¥å…·è°ƒç”¨ï¼Œå¦‚æ–‡ä»¶æ“ä½œã€ä»£ç åˆ†æç­‰',\n      inputData: {\n        hookEventName: 'Status',\n        sessionId: 'tool_session_202',\n        model: { id: 'claude-sonnet-4' },\n        workspace: {\n          current_dir: '/Users/developer/automation-scripts',\n          project_dir: '/Users/developer/automation-scripts',\n        },\n        transcriptPath: '/tmp/claude_transcript_tool.json',\n        cwd: '/Users/developer/automation-scripts',\n        gitBranch: null,\n      },\n      tokenUsage: 55,\n      expectedStatus: 'tool_use',\n    });\n\n    // å®ŒæˆçŠ¶æ€åœºæ™¯ - ä»»åŠ¡å®Œæˆ\n    this.scenarios.set('complete', {\n      id: 'complete',\n      name: 'ä»»åŠ¡å®Œæˆ',\n      description: 'ä»»åŠ¡æˆåŠŸå®Œæˆï¼Œå‡†å¤‡æ¥å—æ–°çš„æŒ‡ä»¤',\n      inputData: {\n        hookEventName: 'Status',\n        sessionId: 'complete_session_303',\n        model: { id: 'claude-sonnet-4' },\n        workspace: {\n          current_dir: '/Users/developer/completed-feature',\n          project_dir: '/Users/developer/completed-feature',\n        },\n        transcriptPath: '/tmp/claude_transcript_complete.json',\n        cwd: '/Users/developer/completed-feature',\n        gitBranch: null,\n      },\n      tokenUsage: 35,\n      expectedStatus: 'complete',\n    });\n\n    // ç©ºé¡¹ç›®åœºæ™¯ - æ–°é¡¹ç›®æˆ–ç©ºç›®å½•\n    this.scenarios.set('empty', {\n      id: 'empty',\n      name: 'ç©ºé¡¹ç›®',\n      description: 'æ–°å»ºé¡¹ç›®æˆ–ç©ºç›®å½•ï¼ŒåŸºç¡€çŠ¶æ€',\n      inputData: {\n        hookEventName: 'Status',\n        sessionId: 'empty_session_404',\n        model: { id: 'claude-haiku-3.5' },\n        workspace: {\n          current_dir: '/Users/developer/new-project',\n          project_dir: '/Users/developer/new-project',\n        },\n        transcriptPath: '/tmp/claude_transcript_empty.json',\n        cwd: '/Users/developer/new-project',\n        gitBranch: null,\n      },\n      tokenUsage: 8,\n      expectedStatus: 'ready',\n    });\n\n    // Gitåœºæ™¯ - æœ‰åˆ†æ”¯ä¿¡æ¯\n    this.scenarios.set('git', {\n      id: 'git',\n      name: 'Gité¡¹ç›®',\n      description: 'Gitç®¡ç†çš„é¡¹ç›®ï¼ŒåŒ…å«åˆ†æ”¯å’Œä»“åº“ä¿¡æ¯',\n      inputData: {\n        hookEventName: 'Status',\n        sessionId: 'git_session_505',\n        model: { id: 'claude-sonnet-4' },\n        workspace: {\n          current_dir: '/Users/developer/web-application',\n          project_dir: '/Users/developer/web-application',\n        },\n        transcriptPath: '/tmp/claude_transcript_git.json',\n        cwd: '/Users/developer/web-application',\n        gitBranch: 'feature/user-authentication',\n      },\n      tokenUsage: 42,\n      expectedStatus: 'ready',\n    });\n  }\n\n  /**\n   * æ ¹æ®åœºæ™¯IDç”ŸæˆMockæ•°æ®\n   */\n  generate(scenarioId: string): InputData {\n    const scenario = this.scenarios.get(scenarioId.toLowerCase());\n    if (!scenario) {\n      throw new Error(\n        `Unknown mock scenario: ${scenarioId}. Available: ${this.getAvailableScenarios().join(', ')}`\n      );\n    }\n\n    // æ·±åº¦å…‹éš†é¿å…ä¿®æ”¹åŸå§‹æ•°æ®\n    const mockData = JSON.parse(JSON.stringify(scenario.inputData)) as InputData;\n\n    // æ·»åŠ Mockå…ƒæ•°æ®ï¼Œä¾›ç»„ä»¶ä½¿ç”¨ | Add mock metadata for components\n    (mockData as Record<string, unknown>).__mock__ = {\n      tokenUsage: scenario.tokenUsage || 0,\n      status: scenario.expectedStatus || 'ready',\n      scenarioId: scenario.id,\n      scenarioName: scenario.name,\n    };\n\n    return mockData;\n  }\n\n  /**\n   * è·å–åœºæ™¯è¯¦æƒ…\n   */\n  getScenario(scenarioId: string): MockScenario | undefined {\n    return this.scenarios.get(scenarioId.toLowerCase());\n  }\n\n  /**\n   * è·å–æ‰€æœ‰å¯ç”¨åœºæ™¯\n   */\n  getAvailableScenarios(): string[] {\n    return Array.from(this.scenarios.keys());\n  }\n\n  /**\n   * è·å–æ‰€æœ‰åœºæ™¯è¯¦æƒ…\n   */\n  getAllScenarios(): MockScenario[] {\n    return Array.from(this.scenarios.values());\n  }\n\n  /**\n   * æ ¹æ®tokenä½¿ç”¨ç‡ç­›é€‰åœºæ™¯\n   */\n  getScenariosByTokenUsage(minUsage: number, maxUsage: number): MockScenario[] {\n    return this.getAllScenarios().filter((scenario) => {\n      const usage = scenario.tokenUsage || 0;\n      return usage >= minUsage && usage <= maxUsage;\n    });\n  }\n\n  /**\n   * æ ¹æ®çŠ¶æ€ç­›é€‰åœºæ™¯\n   */\n  getScenariosByStatus(status: MockScenario['expectedStatus']): MockScenario[] {\n    return this.getAllScenarios().filter((scenario) => scenario.expectedStatus === status);\n  }\n\n  /**\n   * ç”Ÿæˆéšæœºåœºæ™¯æ•°æ®\n   */\n  generateRandom(): InputData {\n    const scenarios = this.getAvailableScenarios();\n    const randomScenario = scenarios[Math.floor(Math.random() * scenarios.length)];\n    return this.generate(randomScenario || 'dev');\n  }\n\n  /**\n   * æ·»åŠ è‡ªå®šä¹‰åœºæ™¯\n   */\n  addCustomScenario(scenario: MockScenario): void {\n    this.scenarios.set(scenario.id, scenario);\n  }\n\n  /**\n   * ç”Ÿæˆå‹åŠ›æµ‹è¯•åœºæ™¯ - æé™tokenä½¿ç”¨\n   */\n  generateStressTestScenario(): InputData {\n    return {\n      hookEventName: 'Status',\n      sessionId: 'stress_test_999',\n      model: { id: 'claude-opus-4.1' },\n      workspace: {\n        current_dir: '/Users/developer/massive-codebase',\n        project_dir: '/Users/developer/massive-codebase',\n      },\n      transcriptPath: '/tmp/claude_transcript_stress.json',\n      cwd: '/Users/developer/massive-codebase',\n      gitBranch: 'performance/optimization-hell',\n    };\n  }\n}\n\n/**\n * é»˜è®¤å¯¼å‡ºMockæ•°æ®ç”Ÿæˆå™¨å®ä¾‹\n */\nexport const mockDataGenerator = new MockDataGenerator();\n","/**\n * å®æ—¶é¢„è§ˆå¼•æ“ - Live Preview Engine\n * æ ¸å¿ƒåŠŸèƒ½: å¤šåœºæ™¯å¹¶è¡Œæ¸²æŸ“ã€å®æ—¶é…ç½®æ›´æ–°ã€åŠ¨æ€çŠ¶æ€å±•ç¤º\n *\n * ç‰¹æ€§:\n * - å¤šåœºæ™¯Mockæ•°æ®åŒæ—¶é¢„è§ˆ\n * - å®æ—¶é…ç½®å˜æ›´å“åº” (<100ms)\n * - åŠ¨æ€çŠ¶æ€æŒ‡ç¤ºå™¨å’Œè¿›åº¦æ¡\n * - æ™ºèƒ½ç»ˆç«¯å…¼å®¹æ€§æ£€æµ‹\n * - å¯é…ç½®åˆ·æ–°é¢‘ç‡å’Œæ˜¾ç¤ºæ¨¡å¼\n */\n\nimport { ConfigLoader } from '../config/loader.js';\nimport type { Config } from '../config/schema.js';\nimport { StatuslineGenerator } from '../core/generator.js';\nimport type { TerminalCapabilities } from '../terminal/detector.js';\nimport { TerminalDetector } from '../terminal/detector.js';\nimport { MockDataGenerator, type MockScenario } from './mock-data.js';\n\n// ANSIè½¬ä¹‰åºåˆ—æ­£åˆ™è¡¨è¾¾å¼ | ANSI escape sequence regex\nconst ANSI_ESCAPE_REGEX = new RegExp(`${String.fromCharCode(27)}\\\\[[0-9;]*m`, 'g');\n\n/**\n * é¢„è§ˆå¼•æ“é…ç½®æ¥å£\n */\nexport interface LivePreviewOptions {\n  /** é…ç½®æ–‡ä»¶è·¯å¾„ */\n  configPath?: string;\n  /** æŒ‡å®šä¸»é¢˜ */\n  theme?: string;\n  /** åˆ·æ–°é¢‘ç‡(æ¯«ç§’) */\n  refreshInterval?: number;\n  /** æ˜¾ç¤ºåœºæ™¯æ•°é‡ */\n  maxScenarios?: number;\n  /** æ˜¯å¦æ˜¾ç¤ºè°ƒè¯•ä¿¡æ¯ */\n  debug?: boolean;\n  /** æ˜¯å¦å¯ç”¨åŠ¨æ€Banner */\n  dynamicBanner?: boolean;\n}\n\n/**\n * æ¸²æŸ“ç»“æœæ¥å£\n */\nexport interface RenderResult {\n  /** åœºæ™¯ID */\n  scenarioId: string;\n  /** æ¸²æŸ“ç»“æœ */\n  output: string;\n  /** æ¸²æŸ“æ—¶é—´(æ¯«ç§’) */\n  renderTime: number;\n  /** æ˜¯å¦æœ‰é”™è¯¯ */\n  hasError: boolean;\n  /** é”™è¯¯ä¿¡æ¯ */\n  error?: string;\n}\n\n/**\n * å®æ—¶é¢„è§ˆå¼•æ“ç±»\n */\nexport class LivePreviewEngine {\n  private generator!: StatuslineGenerator;\n  private configLoader: ConfigLoader;\n  private mockGenerator: MockDataGenerator;\n  private terminalDetector: TerminalDetector;\n  private currentConfig!: Config;\n  private options: {\n    configPath?: string;\n    theme?: string;\n    refreshInterval: number;\n    maxScenarios: number;\n    debug: boolean;\n    dynamicBanner: boolean;\n  };\n  private isRunning = false;\n\n  constructor(options: LivePreviewOptions = {}) {\n    this.options = {\n      refreshInterval: options.refreshInterval || 300,\n      maxScenarios: options.maxScenarios || 6,\n      debug: options.debug || false,\n      dynamicBanner: options.dynamicBanner ?? true,\n    };\n\n    if (options.configPath) {\n      this.options.configPath = options.configPath;\n    }\n\n    if (options.theme) {\n      this.options.theme = options.theme;\n    }\n\n    this.configLoader = new ConfigLoader();\n    this.mockGenerator = new MockDataGenerator();\n    this.terminalDetector = new TerminalDetector();\n  }\n\n  /**\n   * å…¬å¼€çš„åˆå§‹åŒ–æ–¹æ³•\n   */\n  async initialize(): Promise<void> {\n    try {\n      this.currentConfig = await this.configLoader.load(this.options.configPath);\n      if (this.options.theme) {\n        await this.configLoader.applyTheme(this.options.theme);\n        this.currentConfig = await this.configLoader.load();\n      }\n      // åœ¨é¢„è§ˆæ¨¡å¼ä¸‹ç¦ç”¨ç¼“å­˜ï¼Œç¡®ä¿æ¯ä¸ªåœºæ™¯éƒ½èƒ½æ­£ç¡®æ¸²æŸ“\n      this.generator = new StatuslineGenerator(this.currentConfig, { disableCache: true });\n    } catch (error) {\n      console.error('Failed to initialize preview engine:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * å¼‚æ­¥åˆå§‹åŒ– - ç§æœ‰æ–¹æ³•ï¼Œç¡®ä¿åˆå§‹åŒ–\n   */\n  private async ensureInitialized(): Promise<void> {\n    if (!this.generator || !this.currentConfig) {\n      await this.initialize();\n    }\n  }\n\n  /**\n   * å¯åŠ¨å®æ—¶é¢„è§ˆæ¨¡å¼\n   */\n  async startLivePreview(): Promise<void> {\n    if (this.isRunning) {\n      throw new Error('Preview engine is already running');\n    }\n\n    await this.ensureInitialized();\n    this.isRunning = true;\n\n    // è®¾ç½®é”®ç›˜å¤„ç†\n    this.setupKeyboardHandling();\n\n    // æ¸…å±å¹¶åˆå§‹åŒ–æ˜¾ç¤º\n    this.clearScreen();\n    await this.renderLivePreview();\n\n    // å¼€å§‹å®æ—¶æ›´æ–°å¾ªç¯\n    const intervalId = setInterval(async () => {\n      if (!this.isRunning) {\n        clearInterval(intervalId);\n        return;\n      }\n      await this.renderLivePreview();\n    }, this.options.refreshInterval);\n\n    // ä¼˜é›…å¤„ç†é€€å‡º\n    process.on('SIGINT', () => {\n      this.isRunning = false;\n      clearInterval(intervalId);\n      console.log('\\nğŸ‘‹ Preview stopped');\n      process.exit(0);\n    });\n  }\n\n  /**\n   * åœæ­¢å®æ—¶é¢„è§ˆ\n   */\n  stopLivePreview(): void {\n    this.isRunning = false;\n\n    // æ¢å¤ç»ˆç«¯çŠ¶æ€\n    if (process.stdin.isTTY) {\n      process.stdin.setRawMode(false);\n      process.stdin.pause();\n    }\n\n    // æ¸…å±å¹¶æ˜¾ç¤ºé€€å‡ºæ¶ˆæ¯\n    console.clear();\n    console.log('\\nğŸ‘‹ å®æ—¶é¢„è§ˆå·²åœæ­¢ - Live Preview stopped');\n\n    // é€€å‡ºè¿›ç¨‹\n    process.exit(0);\n  }\n\n  /**\n   * æ¸²æŸ“å®æ—¶é¢„è§ˆç•Œé¢\n   */\n  private async renderLivePreview(): Promise<void> {\n    const capabilities = this.terminalDetector.detectCapabilities();\n    const scenarios = this.getSelectedScenarios();\n\n    // ç§»åŠ¨å…‰æ ‡åˆ°é¡¶éƒ¨\n    process.stdout.write('\\x1b[H');\n\n    // æ¸²æŸ“æ ‡é¢˜æ \n    this.renderHeader(capabilities);\n\n    // æ¸²æŸ“åŠ¨æ€Banner\n    if (this.options.dynamicBanner) {\n      await this.renderDynamicBanner();\n    }\n\n    // æ¸²æŸ“é…ç½®ä¿¡æ¯\n    this.renderConfigInfo();\n\n    // æ¸²æŸ“åœºæ™¯é¢„è§ˆ\n    await this.renderScenariosPreview(scenarios, capabilities);\n\n    // æ¸²æŸ“å¿«æ·é”®æç¤º\n    this.renderShortcutsHelp(capabilities);\n  }\n\n  /**\n   * æ¸²æŸ“é™æ€é¢„è§ˆ - ç”¨äºpreviewå­å‘½ä»¤\n   */\n  async renderStaticPreview(scenarioIds: string[]): Promise<void> {\n    await this.ensureInitialized();\n\n    const capabilities = this.terminalDetector.detectCapabilities();\n    console.log(this.formatTitle('Claude Code Statusline Pro - Static Preview', capabilities));\n    console.log();\n\n    for (const scenarioId of scenarioIds) {\n      try {\n        const result = await this.renderScenario(scenarioId);\n        console.log(this.formatScenarioOutput(result, capabilities));\n      } catch (error) {\n        console.error(`Error rendering scenario ${scenarioId}:`, error);\n      }\n    }\n  }\n\n  /**\n   * æ›´æ–°é…ç½®å¹¶åˆ·æ–°é¢„è§ˆ\n   */\n  async updateConfig(changes: Partial<Config>): Promise<void> {\n    try {\n      // åˆå¹¶é…ç½®å˜æ›´\n      this.currentConfig = { ...this.currentConfig, ...changes };\n\n      // é‡æ–°åˆ›å»ºç”Ÿæˆå™¨ï¼Œä¿æŒç¼“å­˜ç¦ç”¨\n      this.generator = new StatuslineGenerator(this.currentConfig, { disableCache: true });\n\n      // ç«‹å³åˆ·æ–°é¢„è§ˆ\n      if (this.isRunning) {\n        await this.renderLivePreview();\n      }\n    } catch (error) {\n      console.error('Failed to update config:', error);\n    }\n  }\n\n  /**\n   * è·å–è¦é¢„è§ˆçš„åœºæ™¯åˆ—è¡¨\n   */\n  private getSelectedScenarios(): MockScenario[] {\n    const allScenarios = this.mockGenerator.getAllScenarios();\n    return allScenarios.slice(0, this.options.maxScenarios);\n  }\n\n  /**\n   * æ¸²æŸ“å•ä¸ªåœºæ™¯\n   */\n  private async renderScenario(scenarioId: string): Promise<RenderResult> {\n    const startTime = Date.now();\n\n    try {\n      const inputData = this.mockGenerator.generate(scenarioId);\n      const output = await this.generator.generate(inputData);\n\n      return {\n        scenarioId,\n        output,\n        renderTime: Date.now() - startTime,\n        hasError: false,\n      };\n    } catch (error) {\n      return {\n        scenarioId,\n        output: '',\n        renderTime: Date.now() - startTime,\n        hasError: true,\n        error: error instanceof Error ? error.message : String(error),\n      };\n    }\n  }\n\n  /**\n   * æ¸²æŸ“æ ‡é¢˜æ \n   */\n  private renderHeader(capabilities: TerminalCapabilities): void {\n    const title = this.formatTitle('Claude Code Statusline Pro v2.0.0', capabilities);\n    const subtitle = capabilities.colors\n      ? '\\x1b[36mğŸ“Š å®æ—¶é¢„è§ˆæ¨¡å¼ - Live Preview\\x1b[0m'\n      : 'ğŸ“Š å®æ—¶é¢„è§ˆæ¨¡å¼ - Live Preview';\n\n    console.log(title);\n    console.log(subtitle);\n    console.log(this.formatSeparator(capabilities));\n    console.log();\n  }\n\n  /**\n   * æ¸²æŸ“åŠ¨æ€Banner\n   */\n  private async renderDynamicBanner(): Promise<void> {\n    // æ¨¡æ‹ŸåŠ¨æ€çŠ¶æ€æ›´æ–°\n    const timestamp = new Date().toLocaleTimeString();\n    const uptime = process.uptime().toFixed(1);\n\n    console.log(`â° æ›´æ–°æ—¶é—´: ${timestamp}  ğŸ“ˆ è¿è¡Œæ—¶é—´: ${uptime}s`);\n    console.log();\n  }\n\n  /**\n   * æ¸²æŸ“é…ç½®ä¿¡æ¯\n   */\n  private renderConfigInfo(): void {\n    const configSource = this.configLoader.getConfigSource() || 'default';\n    const theme = this.currentConfig.theme || 'default';\n\n    console.log(`ğŸ“ é…ç½®æº: ${configSource}`);\n    console.log(`ğŸ¨ å½“å‰ä¸»é¢˜: ${theme}`);\n    console.log(`ğŸ”§ ç»„ä»¶é¢„è®¾: ${this.currentConfig.preset || 'PMBTS'}`);\n    console.log();\n  }\n\n  /**\n   * æ¸²æŸ“åœºæ™¯é¢„è§ˆ\n   */\n  private async renderScenariosPreview(\n    scenarios: MockScenario[],\n    capabilities: TerminalCapabilities\n  ): Promise<void> {\n    for (const scenario of scenarios) {\n      const result = await this.renderScenario(scenario.id);\n      console.log(this.formatScenarioOutput(result, capabilities, scenario));\n      console.log();\n    }\n  }\n\n  /**\n   * æ¸²æŸ“å¿«æ·é”®å¸®åŠ©\n   */\n  private renderShortcutsHelp(capabilities: TerminalCapabilities): void {\n    const helpText = capabilities.colors\n      ? '\\x1b[90må¿«æ·é”®: [c] é…ç½®  [t] ä¸»é¢˜  [p] é¢„è®¾  [r] åˆ·æ–°  [q] é€€å‡º\\x1b[0m'\n      : 'å¿«æ·é”®: [c] é…ç½®  [t] ä¸»é¢˜  [p] é¢„è®¾  [r] åˆ·æ–°  [q] é€€å‡º';\n\n    console.log(this.formatSeparator(capabilities));\n    console.log(helpText);\n  }\n\n  /**\n   * è·å–ä¸åŒ…å«ANSIä»£ç çš„å¯è§æ–‡æœ¬é•¿åº¦\n   */\n  private getVisibleLength(text: string): number {\n    // ç§»é™¤ANSIè½¬ä¹‰åºåˆ—\n    return text.replace(ANSI_ESCAPE_REGEX, '').length;\n  }\n\n  /**\n   * å¯¹åŒ…å«ANSIä»£ç çš„æ–‡æœ¬è¿›è¡Œå¯è§†åŒ–padding\n   */\n  private padEndVisible(text: string, targetLength: number): string {\n    const visibleLength = this.getVisibleLength(text);\n    const paddingNeeded = Math.max(0, targetLength - visibleLength);\n    return text + ' '.repeat(paddingNeeded);\n  }\n\n  /**\n   * è·å–ç»ˆç«¯å®½åº¦\n   */\n  private getTerminalWidth(): number {\n    return process.stdout.columns || parseInt(process.env.COLUMNS || '80') || 80;\n  }\n\n  /**\n   * æ ¼å¼åŒ–åœºæ™¯è¾“å‡º\n   */\n  private formatScenarioOutput(\n    result: RenderResult,\n    capabilities: TerminalCapabilities,\n    scenario?: MockScenario\n  ): string {\n    const scenarioInfo = scenario ? ` - ${scenario.name}` : '';\n    const performanceInfo = this.options.debug ? ` (${result.renderTime}ms)` : '';\n\n    // è·å–ç»ˆç«¯å®½åº¦å¹¶é¢„ç•™è¾¹è·\n    const terminalWidth = this.getTerminalWidth();\n    const maxBoxWidth = terminalWidth - 2; // é¢„ç•™2å­—ç¬¦è¾¹è·\n\n    // è®¡ç®—headerå’Œcontentçš„å¯è§é•¿åº¦\n    const headerText = `åœºæ™¯: ${result.scenarioId}${scenarioInfo}${performanceInfo}`;\n    const headerVisibleLength = this.getVisibleLength(headerText);\n\n    const contentText = result.hasError\n      ? capabilities.colors\n        ? `âŒ é”™è¯¯: ${result.error}`\n        : `âŒ é”™è¯¯: ${result.error}`\n      : result.output;\n    const contentVisibleLength = this.getVisibleLength(contentText);\n\n    // æ ¹æ®å†…å®¹ç¡®å®šæ¡†çº¿å®½åº¦ï¼Œä½†ä¸è¶…è¿‡ç»ˆç«¯å®½åº¦\n    const idealBoxWidth = Math.max(\n      headerVisibleLength + 8, // header + \"â”Œâ”€ \" + \" â”€â”\"\n      contentVisibleLength + 4 // content + \"â”‚ \" + \" â”‚\"\n    );\n    const boxWidth = Math.min(idealBoxWidth, maxBoxWidth);\n\n    // ç”Ÿæˆé¡¶éƒ¨æ¡†çº¿\n    const topBorderLength = boxWidth - headerVisibleLength - 4; // å‡å» \"â”Œâ”€ \" + \" \"\n    const topBorder = 'â”€'.repeat(Math.max(1, topBorderLength));\n\n    let output = `â”Œâ”€ ${headerText} ${topBorder}â”\\n`;\n\n    // ç”Ÿæˆå†…å®¹è¡Œ - å¦‚æœå†…å®¹è¿‡é•¿åˆ™æˆªæ–­\n    const maxContentWidth = boxWidth - 4; // å‡å» \"â”‚ \" + \" â”‚\"\n\n    if (result.hasError) {\n      const errorMsg = capabilities.colors\n        ? `\\x1b[31mâŒ é”™è¯¯: ${result.error}\\x1b[0m`\n        : `âŒ é”™è¯¯: ${result.error}`;\n\n      let displayMsg = errorMsg;\n      if (this.getVisibleLength(errorMsg) > maxContentWidth) {\n        // æˆªæ–­è¿‡é•¿çš„é”™è¯¯æ¶ˆæ¯\n        const visibleError = errorMsg.replace(ANSI_ESCAPE_REGEX, '');\n        const truncatedError = `${visibleError.substring(0, maxContentWidth - 3)}...`;\n        displayMsg = capabilities.colors ? `\\x1b[31m${truncatedError}\\x1b[0m` : truncatedError;\n      }\n\n      output += `â”‚ ${this.padEndVisible(displayMsg, maxContentWidth)} â”‚\\n`;\n    } else {\n      let displayOutput = result.output;\n      if (this.getVisibleLength(displayOutput) > maxContentWidth) {\n        // æˆªæ–­è¿‡é•¿çš„å†…å®¹ï¼Œä½†ä¿æŒANSIä»£ç å®Œæ•´æ€§\n        const truncatedOutput = `${this.truncateWithAnsi(displayOutput, maxContentWidth - 3)}...`;\n        displayOutput = truncatedOutput;\n      }\n\n      output += `â”‚ ${this.padEndVisible(displayOutput, maxContentWidth)} â”‚\\n`;\n    }\n\n    // ç”Ÿæˆåº•éƒ¨æ¡†çº¿\n    const bottomBorder = 'â”€'.repeat(boxWidth - 2); // å‡å» \"â””\" + \"â”˜\"\n    output += `â””${bottomBorder}â”˜`;\n\n    return output;\n  }\n\n  /**\n   * å®‰å…¨æˆªæ–­åŒ…å«ANSIä»£ç çš„æ–‡æœ¬\n   */\n  private truncateWithAnsi(text: string, maxLength: number): string {\n    let visibleLength = 0;\n    let result = '';\n    let i = 0;\n\n    while (i < text.length && visibleLength < maxLength) {\n      if (text[i] === '\\x1b' && text[i + 1] === '[') {\n        // é‡åˆ°ANSIè½¬ä¹‰åºåˆ—ï¼Œæ‰¾åˆ°ç»“æŸä½ç½®\n        const ansiStart = i;\n        i += 2;\n        while (i < text.length && !/[a-zA-Z]/.test(text[i] || '')) {\n          i++;\n        }\n        if (i < text.length) i++; // åŒ…å«ç»“æŸå­—æ¯\n        result += text.substring(ansiStart, i);\n      } else {\n        // æ™®é€šå­—ç¬¦\n        result += text[i];\n        visibleLength++;\n        i++;\n      }\n    }\n\n    return result;\n  }\n\n  /**\n   * æ ¼å¼åŒ–æ ‡é¢˜\n   */\n  private formatTitle(title: string, capabilities: TerminalCapabilities): string {\n    if (capabilities.colors) {\n      return `\\x1b[1;36m${title}\\x1b[0m`;\n    }\n    return title;\n  }\n\n  /**\n   * æ ¼å¼åŒ–åˆ†éš”çº¿\n   */\n  private formatSeparator(capabilities: TerminalCapabilities): string {\n    const line = 'â”€'.repeat(70);\n    if (capabilities.colors) {\n      return `\\x1b[90m${line}\\x1b[0m`;\n    }\n    return line;\n  }\n\n  /**\n   * æ¸…å±\n   */\n  private clearScreen(): void {\n    // æ¸…å±å¹¶ç§»åŠ¨å…‰æ ‡åˆ°é¡¶éƒ¨\n    process.stdout.write('\\x1b[2J\\x1b[H');\n  }\n\n  /**\n   * å¤„ç†é”®ç›˜è¾“å…¥ (ç”¨äºäº¤äº’å¼æ¨¡å¼)\n   */\n  private setupKeyboardHandling(): void {\n    if (process.stdin.isTTY) {\n      process.stdin.setRawMode(true);\n      process.stdin.resume();\n      process.stdin.setEncoding('utf8');\n\n      process.stdin.on('data', (key: string) => {\n        switch (key) {\n          case 'c':\n            // æ‰“å¼€é…ç½®ç¼–è¾‘å™¨\n            break;\n          case 't':\n            // åˆ‡æ¢ä¸»é¢˜\n            break;\n          case 'p':\n            // åˆ‡æ¢é¢„è®¾\n            break;\n          case 'r':\n            // åˆ·æ–°\n            this.renderLivePreview();\n            break;\n          case 'q':\n          case '\\u0003': // Ctrl+C\n            this.stopLivePreview();\n            break;\n        }\n      });\n    }\n  }\n\n  /**\n   * è·å–å½“å‰é…ç½®\n   */\n  getCurrentConfig(): Config {\n    return this.currentConfig;\n  }\n\n  /**\n   * è·å–å¯ç”¨åœºæ™¯åˆ—è¡¨\n   */\n  getAvailableScenarios(): string[] {\n    return this.mockGenerator.getAvailableScenarios();\n  }\n}\n\n/**\n * å·¥å‚å‡½æ•° - åˆ›å»ºé¢„è§ˆå¼•æ“å®ä¾‹\n */\nexport function createLivePreviewEngine(options?: LivePreviewOptions): LivePreviewEngine {\n  return new LivePreviewEngine(options);\n}\n","/**\n * CLIæ¶ˆæ¯å›¾æ ‡ç®¡ç†å™¨ | CLI message icon manager\n * å¤ç”¨ç»ˆç«¯æ£€æµ‹æœºåˆ¶ï¼Œä¸ºCLIæ¶ˆæ¯æä¾›ä¸‰å±‚å›é€€å›¾æ ‡ç³»ç»Ÿ\n *\n * @author wangnov\n * @date 2025-08-12T20:30:20+08:00\n */\n\nimport type { TerminalCapabilities } from '../terminal/detector.js';\nimport { detect } from '../terminal/detector.js';\n\n/**\n * CLIæ¶ˆæ¯å›¾æ ‡æ˜ å°„æ¥å£ | CLI message icon mapping interface\n */\nexport interface CliIconMap {\n  [iconName: string]: string;\n}\n\n/**\n * CLIæ¶ˆæ¯å›¾æ ‡ç®¡ç†å™¨æ„é€ é€‰é¡¹ | CLI message icon manager constructor options\n */\nexport interface CliMessageIconOptions {\n  enableColors?: boolean | 'auto';\n  enableEmoji?: boolean | 'auto';\n  enableNerdFont?: boolean | 'auto';\n  forceNerdFont?: boolean;\n}\n\n/**\n * CLIæ¶ˆæ¯å›¾æ ‡ç®¡ç†å™¨ | CLI message icon manager\n * ä¸ºCLIç•Œé¢æä¾›ç»Ÿä¸€çš„å›¾æ ‡ç®¡ç†ï¼Œæ”¯æŒä¸‰å±‚å›é€€\n */\nexport class CliMessageIconManager {\n  private capabilities: TerminalCapabilities;\n  private icons: CliIconMap;\n\n  constructor(options: CliMessageIconOptions = {}) {\n    this.capabilities = detect(\n      options.enableColors,\n      options.enableEmoji,\n      options.enableNerdFont,\n      options.forceNerdFont || false\n    );\n    this.icons = this.setupCliIcons();\n  }\n\n  /**\n   * è·å–å›¾æ ‡ | Get icon\n   */\n  public getIcon(iconName: string): string {\n    return this.icons[iconName] || '';\n  }\n\n  /**\n   * è®¾ç½®CLIå›¾æ ‡ç³»ç»Ÿ | Setup CLI icon system\n   */\n  private setupCliIcons(): CliIconMap {\n    // ç¬¬ä¸€å±‚ï¼šNerd Fontå›¾æ ‡ (Font Awesomeç³»åˆ—) | First tier: Nerd Font icons\n    const nerdFontIcons: CliIconMap = {\n      // çŠ¶æ€å›¾æ ‡ | Status icons\n      success: '\\uf00c', // fa-check\n      error: '\\uf00d', // fa-times\n      warning: '\\uf071', // fa-exclamation-triangle\n      info: '\\uf05a', // fa-info-circle\n\n      // åŠŸèƒ½å›¾æ ‡ | Function icons\n      config: '\\uf013', // fa-cog\n      file: '\\uf15b', // fa-file-o\n      folder: '\\uf07b', // fa-folder\n      theme: '\\uf0c7', // fa-floppy-o\n      edit: '\\uf044', // fa-edit\n      validate: '\\uf058', // fa-check-circle\n      reset: '\\uf0e2', // fa-undo\n\n      // è¯Šæ–­å›¾æ ‡ | Diagnostic icons\n      doctor: '\\uf0f8', // fa-stethoscope\n      platform: '\\uf109', // fa-desktop\n      terminal: '\\uf120', // fa-terminal\n\n      // äº¤äº’å›¾æ ‡ | Interactive icons\n      goodbye: '\\uf164', // fa-thumbs-up\n      prompt: '\\uf059', // fa-question-circle\n    };\n\n    // ç¬¬äºŒå±‚ï¼šEmojiå›¾æ ‡ | Second tier: Emoji icons\n    const emojiIcons: CliIconMap = {\n      // çŠ¶æ€å›¾æ ‡ | Status icons\n      success: 'âœ…',\n      error: 'âŒ',\n      warning: 'âš ï¸',\n      info: 'â„¹ï¸',\n\n      // åŠŸèƒ½å›¾æ ‡ | Function icons\n      config: 'âš™ï¸',\n      file: 'ğŸ“„',\n      folder: 'ğŸ“',\n      theme: 'ğŸ¨',\n      edit: 'âœï¸',\n      validate: 'ğŸ”',\n      reset: 'ğŸ”„',\n\n      // è¯Šæ–­å›¾æ ‡ | Diagnostic icons\n      doctor: 'ğŸ”',\n      platform: 'ğŸ’»',\n      terminal: 'ğŸ“Ÿ',\n\n      // äº¤äº’å›¾æ ‡ | Interactive icons\n      goodbye: 'ğŸ‘‹',\n      prompt: 'â“',\n    };\n\n    // ç¬¬ä¸‰å±‚ï¼šæ–‡æœ¬å›¾æ ‡ | Third tier: Text icons\n    const textIcons: CliIconMap = {\n      // çŠ¶æ€å›¾æ ‡ | Status icons\n      success: '[OK]',\n      error: '[ERR]',\n      warning: '[WARN]',\n      info: '[INFO]',\n\n      // åŠŸèƒ½å›¾æ ‡ | Function icons\n      config: '[CFG]',\n      file: '[FILE]',\n      folder: '[DIR]',\n      theme: '[THEME]',\n      edit: '[EDIT]',\n      validate: '[CHECK]',\n      reset: '[RESET]',\n\n      // è¯Šæ–­å›¾æ ‡ | Diagnostic icons\n      doctor: '[DIAG]',\n      platform: '[PLAT]',\n      terminal: '[TERM]',\n\n      // äº¤äº’å›¾æ ‡ | Interactive icons\n      goodbye: '[BYE]',\n      prompt: '[?]',\n    };\n\n    // æ ¹æ®ç»ˆç«¯èƒ½åŠ›é€‰æ‹©å›¾æ ‡é›† | Select icon set based on capabilities\n    if (this.capabilities.nerdFont) {\n      return nerdFontIcons;\n    } else if (this.capabilities.emoji) {\n      return emojiIcons;\n    } else {\n      return textIcons;\n    }\n  }\n\n  /**\n   * æ ¼å¼åŒ–æ¶ˆæ¯ä¸å›¾æ ‡ | Format message with icon\n   */\n  public format(iconName: string, message: string): string {\n    const icon = this.getIcon(iconName);\n    return icon ? `${icon} ${message}` : message;\n  }\n\n  /**\n   * è·å–ç»ˆç«¯èƒ½åŠ›ä¿¡æ¯ | Get terminal capabilities\n   */\n  public getCapabilities(): TerminalCapabilities {\n    return { ...this.capabilities };\n  }\n\n  /**\n   * å¼ºåˆ¶åˆ·æ–°ç»ˆç«¯æ£€æµ‹ | Force refresh terminal detection\n   */\n  public refresh(options: CliMessageIconOptions = {}): void {\n    this.capabilities = detect(\n      options.enableColors,\n      options.enableEmoji,\n      options.enableNerdFont,\n      options.forceNerdFont || false\n    );\n    this.icons = this.setupCliIcons();\n  }\n}\n\n/**\n * å…¨å±€CLIå›¾æ ‡ç®¡ç†å™¨å®ä¾‹ | Global CLI icon manager instance\n */\nlet globalCliIconManager: CliMessageIconManager | null = null;\n\n/**\n * è·å–å…¨å±€CLIå›¾æ ‡ç®¡ç†å™¨ | Get global CLI icon manager\n */\nexport function getCliIconManager(): CliMessageIconManager {\n  if (!globalCliIconManager) {\n    globalCliIconManager = new CliMessageIconManager();\n  }\n  return globalCliIconManager;\n}\n\n/**\n * ä¾¿æ·å‡½æ•°ï¼šæ ¼å¼åŒ–CLIæ¶ˆæ¯ | Convenience function: format CLI message\n */\nexport function formatCliMessage(iconName: string, message: string): string {\n  return getCliIconManager().format(iconName, message);\n}\n\n/**\n * ä¾¿æ·å‡½æ•°ï¼šè·å–CLIå›¾æ ‡ | Convenience function: get CLI icon\n */\nexport function getCliIcon(iconName: string): string {\n  return getCliIconManager().getIcon(iconName);\n}\n","import { type InputData, InputDataSchema } from '../config/schema.js';\n\n/**\n * è§£æç»“æœæ¥å£ | Parse result interface\n */\nexport interface ParseResult {\n  success: boolean;\n  data?: InputData;\n  error?: string;\n}\n\n/**\n * ä»stdinè¯»å–è¾“å…¥ | Read input from stdin\n */\nexport async function readFromStdin(): Promise<string> {\n  return new Promise((resolve, reject) => {\n    let input = '';\n\n    // è®¾ç½®è¶…æ—¶ | Set timeout\n    const timeout = setTimeout(() => {\n      reject(new Error('Input timeout'));\n    }, 5000);\n\n    process.stdin.setEncoding('utf8');\n\n    process.stdin.on('readable', () => {\n      let chunk: string | null;\n      // ä½¿ç”¨æ˜¾å¼èµ‹å€¼é¿å…è¡¨è¾¾å¼ä¸­çš„èµ‹å€¼\n      chunk = process.stdin.read();\n      while (chunk !== null) {\n        input += chunk;\n        chunk = process.stdin.read();\n      }\n    });\n\n    process.stdin.on('end', () => {\n      clearTimeout(timeout);\n      resolve(input);\n    });\n\n    process.stdin.on('error', (error) => {\n      clearTimeout(timeout);\n      reject(error);\n    });\n  });\n}\n\n/**\n * åˆ›å»ºé»˜è®¤è¾“å…¥æ•°æ® | Create default input data\n */\nfunction createDefaultInputData(): InputData {\n  return {\n    hookEventName: 'Status',\n    sessionId: null,\n    transcriptPath: null,\n    cwd: process.cwd(),\n    model: {},\n    workspace: {\n      current_dir: process.cwd(),\n      project_dir: process.cwd(),\n    },\n    gitBranch: null,\n  };\n}\n\n/**\n * è§£æJSONè¾“å…¥ | Parse JSON input\n */\nexport function parseJson(input: string): ParseResult {\n  try {\n    // å¤„ç†ç©ºè¾“å…¥ | Handle empty input\n    if (!input.trim()) {\n      return {\n        success: true,\n        data: createDefaultInputData(),\n      };\n    }\n\n    // è§£æJSON | Parse JSON\n    const rawData = JSON.parse(input);\n\n    // ä½¿ç”¨ZodéªŒè¯å’Œè½¬æ¢æ•°æ® | Use Zod to validate and transform data\n    const result = InputDataSchema.safeParse(rawData);\n\n    if (result.success) {\n      return {\n        success: true,\n        data: result.data,\n      };\n    } else {\n      return {\n        success: false,\n        error: `Input validation failed: ${result.error.message}`,\n      };\n    }\n  } catch (error) {\n    // JSONè§£æå¤±è´¥ï¼Œå°è¯•åˆ›å»ºé»˜è®¤æ•°æ® | JSON parse failed, try to create default data\n    if (error instanceof SyntaxError) {\n      return {\n        success: false,\n        error: `Invalid JSON: ${error.message}`,\n      };\n    }\n\n    return {\n      success: false,\n      error: `Parse error: ${error instanceof Error ? error.message : String(error)}`,\n    };\n  }\n}\n\n/**\n * è§£æè¾“å…¥å¹¶å¤„ç†å®˜æ–¹æ ‡å‡†æ ¼å¼ | Parse input and handle official standard format\n */\nexport async function parseInput(): Promise<ParseResult> {\n  try {\n    const input = await readFromStdin();\n    return parseJson(input);\n  } catch (_error) {\n    // stdinè¯»å–å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤æ•°æ® | stdin read failed, use default data\n    return {\n      success: true,\n      data: createDefaultInputData(),\n    };\n  }\n}\n\n/**\n * éªŒè¯è¾“å…¥æ•°æ®æ ¼å¼ | Validate input data format\n */\nexport function validate(data: unknown): ParseResult {\n  try {\n    const result = InputDataSchema.safeParse(data);\n\n    if (result.success) {\n      return {\n        success: true,\n        data: result.data,\n      };\n    } else {\n      return {\n        success: false,\n        error: `Validation failed: ${result.error.message}`,\n      };\n    }\n  } catch (error) {\n    return {\n      success: false,\n      error: `Validation error: ${error instanceof Error ? error.message : String(error)}`,\n    };\n  }\n}\n\n/**\n * å¤„ç†å‘½ä»¤è¡Œå‚æ•° | Handle command line arguments\n */\nexport function parseArguments(args: string[]): Partial<InputData> {\n  const parsed: Partial<InputData> = {};\n\n  for (let i = 0; i < args.length; i++) {\n    const arg = args[i];\n    const nextArg = args[i + 1];\n\n    switch (arg) {\n      case '--transcript-path':\n      case '-t':\n        if (nextArg && !nextArg.startsWith('-')) {\n          parsed.transcriptPath = nextArg;\n          i++;\n        }\n        break;\n\n      case '--cwd':\n      case '-c':\n        if (nextArg && !nextArg.startsWith('-')) {\n          parsed.cwd = nextArg;\n          i++;\n        }\n        break;\n\n      case '--model':\n      case '-m':\n        if (nextArg && !nextArg.startsWith('-')) {\n          parsed.model = { id: nextArg };\n          i++;\n        }\n        break;\n\n      case '--branch':\n      case '-b':\n        if (nextArg && !nextArg.startsWith('-')) {\n          parsed.gitBranch = nextArg;\n          i++;\n        }\n        break;\n    }\n  }\n\n  return parsed;\n}\n\n/**\n * åˆå¹¶è¾“å…¥æ•°æ® | Merge input data\n */\nexport function mergeInputData(base: InputData, override: Partial<InputData>): InputData {\n  return {\n    ...base,\n    ...override,\n    model: { ...base.model, ...override.model },\n    workspace: { ...base.workspace, ...override.workspace },\n  };\n}\n\n/**\n * è·å–è°ƒè¯•ä¿¡æ¯ | Get debug information\n */\nexport function getDebugInfo(data: InputData): Record<string, unknown> {\n  return {\n    hookEventName: data.hookEventName,\n    sessionId: data.sessionId,\n    transcriptPath: data.transcriptPath,\n    cwd: data.cwd,\n    model: data.model,\n    workspace: data.workspace,\n    gitBranch: data.gitBranch,\n    env: {\n      PWD: process.env.PWD,\n      HOME: process.env.HOME,\n      USER: process.env.USER,\n      TERM: process.env.TERM,\n      TERM_PROGRAM: process.env.TERM_PROGRAM,\n    },\n  };\n}\n\n/**\n * @deprecated Legacy class - use individual functions instead\n * å‘åå…¼å®¹æ€§çš„é—ç•™ç±» - è¯·ä½¿ç”¨ç‹¬ç«‹å‡½æ•°\n */\n// Note: This class has been removed to improve code quality.\n// Use the exported functions directly instead.\n","/**\n * å·¥å…·å‡½æ•°é›†åˆ\n * æä¾›å¸¸ç”¨çš„å·¥å…·å‡½æ•°å’Œè¾…åŠ©æ–¹æ³•\n */\n\n/**\n * æ ¼å¼åŒ–å­—èŠ‚å¤§å°\n */\nexport function formatBytes(bytes: number): string {\n  if (bytes === 0) return '0 B';\n  const k = 1024;\n  const sizes = ['B', 'KB', 'MB', 'GB', 'TB'];\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\n  return `${parseFloat((bytes / k ** i).toFixed(1))} ${sizes[i]}`;\n}\n\n/**\n * æ ¼å¼åŒ–æ•°å­—ä¸ºåƒä½åˆ†éš”ç¬¦å½¢å¼\n */\nexport function formatNumber(num: number): string {\n  return num.toLocaleString();\n}\n\n/**\n * æˆªæ–­å­—ç¬¦ä¸²åˆ°æŒ‡å®šé•¿åº¦\n */\nexport function truncateString(str: string, maxLength: number, suffix = '...'): string {\n  if (str.length <= maxLength) return str;\n  return str.substring(0, maxLength - suffix.length) + suffix;\n}\n\n/**\n * è·å–é¡¹ç›®åç§°ä»è·¯å¾„\n */\nexport function getProjectName(projectPath: string): string {\n  return projectPath.split('/').filter(Boolean).pop() || 'unknown';\n}\n\n/**\n * è®¡ç®—ç™¾åˆ†æ¯”\n */\nexport function calculatePercentage(used: number, total: number): number {\n  if (total === 0) return 0;\n  return Math.round((used / total) * 100);\n}\n\n/**\n * ç”Ÿæˆè¿›åº¦æ¡\n */\nexport function generateProgressBar(\n  percentage: number,\n  length = 10,\n  fillChar = 'â–ˆ',\n  emptyChar = 'â–‘',\n  warningThreshold = 60,\n  criticalThreshold = 95\n): string {\n  const filled = Math.round((percentage / 100) * length);\n  const empty = length - filled;\n\n  // æ ¹æ®é˜ˆå€¼é€‰æ‹©ä¸åŒçš„å­—ç¬¦\n  let progressChar = fillChar;\n  if (percentage >= criticalThreshold) {\n    progressChar = 'ğŸ”¥'; // ä¸´ç•ŒçŠ¶æ€\n  } else if (percentage >= warningThreshold) {\n    progressChar = 'â–“'; // è­¦å‘ŠçŠ¶æ€\n  }\n\n  return progressChar.repeat(filled) + emptyChar.repeat(empty);\n}\n\n/**\n * è·å–Gitåˆ†æ”¯ç®€åŒ–åç§°\n */\nexport function simplifyBranchName(branchName: string, maxLength = 20): string {\n  // ç§»é™¤å¸¸è§å‰ç¼€\n  let simplified = branchName.replace(/^(origin\\/|refs\\/heads\\/|refs\\/remotes\\/)/, '');\n\n  // å¦‚æœå¤ªé•¿ï¼Œæˆªæ–­å¹¶ä¿ç•™é‡è¦éƒ¨åˆ†\n  if (simplified.length > maxLength) {\n    const parts = simplified.split(/[-_/]/);\n    if (parts.length > 1) {\n      // ä¿ç•™æœ€åä¸€éƒ¨åˆ†å’Œç¬¬ä¸€éƒ¨åˆ†çš„å‰å‡ ä¸ªå­—ç¬¦\n      const lastPart = parts[parts.length - 1];\n      const firstPart =\n        parts[0]?.substring(0, Math.max(3, maxLength - (lastPart?.length || 0) - 3)) || '';\n      simplified = `${firstPart}...${lastPart || ''}`;\n    } else {\n      simplified = truncateString(simplified, maxLength);\n    }\n  }\n\n  return simplified;\n}\n\n/**\n * æ·±åº¦åˆå¹¶å¯¹è±¡\n */\nexport function deepMerge<T extends Record<string, unknown>>(target: T, source: Partial<T>): T {\n  const result = { ...target };\n\n  for (const key in source) {\n    if (source[key] !== undefined) {\n      if (\n        typeof source[key] === 'object' &&\n        source[key] !== null &&\n        !Array.isArray(source[key]) &&\n        typeof result[key] === 'object' &&\n        result[key] !== null &&\n        !Array.isArray(result[key])\n      ) {\n        result[key] = deepMerge(\n          result[key] as Record<string, unknown>,\n          source[key] as Record<string, unknown>\n        ) as T[Extract<keyof T, string>];\n      } else {\n        result[key] = source[key] as T[Extract<keyof T, string>];\n      }\n    }\n  }\n\n  return result;\n}\n\n/**\n * æ£€æµ‹æ“ä½œç³»ç»Ÿ\n */\nexport function getOS(): 'windows' | 'macos' | 'linux' | 'unknown' {\n  const platform = process.platform;\n  switch (platform) {\n    case 'win32':\n      return 'windows';\n    case 'darwin':\n      return 'macos';\n    case 'linux':\n      return 'linux';\n    default:\n      return 'unknown';\n  }\n}\n\n/**\n * å®‰å…¨çš„JSONè§£æ\n */\nexport function safeJsonParse<T = unknown>(str: string, fallback: T): T {\n  try {\n    return JSON.parse(str);\n  } catch {\n    return fallback;\n  }\n}\n\n/**\n * é˜²æŠ–å‡½æ•°\n */\nexport function debounce<T extends (...args: unknown[]) => void>(\n  func: T,\n  wait: number\n): (...args: Parameters<T>) => void {\n  let timeout: NodeJS.Timeout;\n\n  return (...args: Parameters<T>) => {\n    clearTimeout(timeout);\n    timeout = setTimeout(() => func(...args), wait);\n  };\n}\n\n/**\n * èŠ‚æµå‡½æ•°\n */\nexport function throttle<T extends (...args: unknown[]) => void>(\n  func: T,\n  limit: number\n): (...args: Parameters<T>) => void {\n  let inThrottle: boolean;\n\n  return (...args: Parameters<T>) => {\n    if (!inThrottle) {\n      func(...args);\n      inThrottle = true;\n      setTimeout(() => {\n        inThrottle = false;\n      }, limit);\n    }\n  };\n}\n\n/**\n * ç”ŸæˆéšæœºID\n */\nexport function generateId(prefix = '', length = 8): string {\n  const chars = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';\n  let result = prefix;\n  for (let i = 0; i < length; i++) {\n    result += chars.charAt(Math.floor(Math.random() * chars.length));\n  }\n  return result;\n}\n\n/**\n * æ—¶é—´æ ¼å¼åŒ–\n */\nexport function formatTime(date: Date = new Date()): string {\n  return date.toLocaleTimeString('zh-CN', {\n    hour12: false,\n    hour: '2-digit',\n    minute: '2-digit',\n    second: '2-digit',\n  });\n}\n\n/**\n * è·å–ç›¸å¯¹æ—¶é—´æè¿°\n */\nexport function getRelativeTime(timestamp: string | Date): string {\n  const now = new Date();\n  const time = new Date(timestamp);\n  const diff = now.getTime() - time.getTime();\n  const seconds = Math.floor(diff / 1000);\n  const minutes = Math.floor(seconds / 60);\n  const hours = Math.floor(minutes / 60);\n  const days = Math.floor(hours / 24);\n\n  if (seconds < 60) return `${seconds}ç§’å‰`;\n  if (minutes < 60) return `${minutes}åˆ†é’Ÿå‰`;\n  if (hours < 24) return `${hours}å°æ—¶å‰`;\n  if (days < 7) return `${days}å¤©å‰`;\n\n  return time.toLocaleDateString('zh-CN');\n}\n"],"mappings":"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","names":["path","fs","TOML","import_node_path","path","import_node_fs","import_node_fs","result","input","ConfigLoader","StatuslineGenerator"]}